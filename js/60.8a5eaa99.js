"use strict";(self["webpackChunkdesigner"]=self["webpackChunkdesigner"]||[]).push([[60],{60:(t,e,s)=>{s.r(e),s.d(e,{default:()=>d});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"header"},[e("h1",{staticClass:"center-text"},[t._v(t._s(t.lang.tips17))])]),e("div",{staticClass:"content"},[e("div",{staticClass:"drag-drop-field",style:{height:0===t.images.length?"120px":"auto"},on:{drop:t.handleDrop,dragover:function(t){t.preventDefault()}}},t._l(t.images,(function(s,a){return e("div",{key:a,staticClass:"image-item"},[e("img",{attrs:{src:s.url,alt:"Image"}}),e("button",{staticClass:"delete-button",on:{click:function(e){return t.deleteImage(a)}}})])})),0),e("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"file-input",multiple:""},on:{change:t.handleFileSelection}}),e("label",{staticClass:"file-upload-button",attrs:{for:"file-input"}},[t._v(" "+t._s(t.lang.tips18)+" ")]),e("p",{staticClass:"upload-info"},[t._v(" "+t._s(t.lang.tips19)+" ")]),e("div",{staticClass:"footer"},[e("button",{staticClass:"el-button el-button--default",on:{click:t.goBack}},[t._v(t._s(t.lang.tips3))]),e("button",{staticClass:"el-button el-button--success",staticStyle:{background:"#345CA0",border:"none"},attrs:{disabled:t.uploading},on:{click:t.upload}},[t._v(" "+t._s(t.uploading?"Uploading...":t.lang.tips20)+" ")])])])])},i=[];const l={data(){return{images:[],uploading:!1,uploadProgress:0,uploadTips:[],lang:{},user:{}}},created(){if(this.lang=this.$lang("board"),this.user=JSON.parse(localStorage.getItem("designer_user")),0===this.user.projects.substring(1).length)return this.list=[],void(this.loading=!1);this.getList()},methods:{handleDrop(t){t.preventDefault();const e=t.dataTransfer.files;this.handleFiles(e)},handleFileSelection(t){const e=t.target.files;this.handleFiles(e)},handleFiles(t){for(let e=0;e<t.length;e++){const s=t[e],a=new FileReader;a.onload=()=>{const t=a.result,e=s.name.split(".").pop().toLowerCase();this.images.push({id:Date.now(),url:t,extension:e})},a.readAsDataURL(s)}},deleteImage(t){this.images.splice(t,1)},upload(){const t=["jpg","jpeg","png"];if(0===this.images.length)return void this.$message.error("No files to upload");this.uploading=!0,this.uploadProgress=0,this.uploadTips=[];const e=new FormData;for(let a=0;a<this.images.length;a++){const s=this.images[a],i=s.extension;if(!t.includes(i))return this.$message.error("Unsupported file type"),void(this.uploading=!1);{const t=this.dataURLtoFile(s.url,`image_${a+1}.${i}`);e.append("file[]",t),e.append("id[]",s.id)}}e.append("createrId",this.user.id),e.append("fileType","YOUR_FILE_TYPE");const s=new XMLHttpRequest;s.upload.onprogress=t=>{this.uploadProgress=parseFloat((t.loaded/t.total*100).toFixed(2))},s.open("POST","https://simplerevise.com/api/project/uploadPublicMultiple/",!0),s.onreadystatechange=()=>{if(200===s.status&&4===s.readyState){JSON.parse(s.response);done(),that.$message.success("success")}},s.onerror=()=>{this.$message.error("System Error: #500"),this.uploading=!1},s.send(e),alert("Upload successful"),this.$router.go(-1)},goBack(){this.$router.go(-1)},dataURLtoFile(t,e){const s=t.split(","),a=s[0].match(/:(.*?);/)[1],i=atob(s[1]),l=i.length,n=new Uint8Array(l);for(let o=0;o<l;o++)n[o]=i.charCodeAt(o);return new File([n],e,{type:a})}}},n=l;var o=s(3736),r=(0,o.Z)(n,a,i,!1,null,"c8ea4bc0",null);const d=r.exports}}]);
//# sourceMappingURL=60.8a5eaa99.js.map