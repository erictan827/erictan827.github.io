{"version":3,"file":"js/60.8a5eaa99.js","mappings":"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","sources":["webpack://designer/./src/views/public_upload.vue?abd3","webpack://designer/src/views/public_upload.vue","webpack://designer/./src/views/public_upload.vue?e72c","webpack://designer/./src/views/public_upload.vue"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"header\"},[_c('h1',{staticClass:\"center-text\"},[_vm._v(_vm._s(_vm.lang.tips17))])]),_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"drag-drop-field\",style:({ height: _vm.images.length === 0 ? '120px' : 'auto' }),on:{\"drop\":_vm.handleDrop,\"dragover\":function($event){$event.preventDefault();}}},_vm._l((_vm.images),function(image,index){return _c('div',{key:index,staticClass:\"image-item\"},[_c('img',{attrs:{\"src\":image.url,\"alt\":\"Image\"}}),_c('button',{staticClass:\"delete-button\",on:{\"click\":function($event){return _vm.deleteImage(index)}}})])}),0),_c('input',{staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"id\":\"file-input\",\"multiple\":\"\"},on:{\"change\":_vm.handleFileSelection}}),_c('label',{staticClass:\"file-upload-button\",attrs:{\"for\":\"file-input\"}},[_vm._v(\" \"+_vm._s(_vm.lang.tips18)+\" \")]),_c('p',{staticClass:\"upload-info\"},[_vm._v(\" \"+_vm._s(_vm.lang.tips19)+\" \")]),_c('div',{staticClass:\"footer\"},[_c('button',{staticClass:\"el-button el-button--default\",on:{\"click\":_vm.goBack}},[_vm._v(_vm._s(_vm.lang.tips3))]),_c('button',{staticClass:\"el-button el-button--success\",staticStyle:{\"background\":\"#345CA0\",\"border\":\"none\"},attrs:{\"disabled\":_vm.uploading},on:{\"click\":_vm.upload}},[_vm._v(\" \"+_vm._s(_vm.uploading ? 'Uploading...' : _vm.lang.tips20)+\" \")])])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"container\">\r\n    <div class=\"header\">\r\n      <h1 class=\"center-text\">{{ lang.tips17 }}</h1>\r\n    </div>\r\n    <div class=\"content\">\r\n      <div class=\"drag-drop-field\" :style=\"{ height: images.length === 0 ? '120px' : 'auto' }\" @drop=\"handleDrop\"\r\n        @dragover.prevent>\r\n        <div v-for=\"(image, index) in images\" :key=\"index\" class=\"image-item\">\r\n          <img :src=\"image.url\" alt=\"Image\" />\r\n          <button class=\"delete-button\" @click=\"deleteImage(index)\"></button>\r\n        </div>\r\n      </div>\r\n      <input type=\"file\" id=\"file-input\" @change=\"handleFileSelection\" style=\"display: none\" multiple />\r\n      <label for=\"file-input\" class=\"file-upload-button\">\r\n        {{ lang.tips18 }}\r\n      </label>\r\n      <p class=\"upload-info\">\r\n        {{ lang.tips19 }}\r\n      </p>\r\n      <div class=\"footer\">\r\n        <button class=\"el-button el-button--default\" @click=\"goBack\">{{ lang.tips3 }}</button>\r\n        <button class=\"el-button el-button--success\" style=\"background:#345CA0;border:none;\" @click=\"upload\"\r\n          :disabled=\"uploading\">\r\n          {{ uploading ? 'Uploading...' : lang.tips20 }}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n  \r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      images: [],\r\n      uploading: false,\r\n      uploadProgress: 0,\r\n      uploadTips: [],\r\n      lang: {},\r\n      user: {},\r\n    };\r\n  },\r\n  created() {\r\n    this.lang = this.$lang('board');\r\n    this.user = JSON.parse(localStorage.getItem('designer_user'));\r\n\r\n    if (this.user.projects.substring(1).length === 0) {\r\n      this.list = [];\r\n      this.loading = false;\r\n      return;\r\n    }\r\n\r\n    this.getList();\r\n  },\r\n  methods: {\r\n    handleDrop(event) {\r\n      event.preventDefault();\r\n      const files = event.dataTransfer.files;\r\n      this.handleFiles(files);\r\n    },\r\n    handleFileSelection(event) {\r\n      const files = event.target.files;\r\n      this.handleFiles(files);\r\n    },\r\n    handleFiles(files) {\r\n      for (let i = 0; i < files.length; i++) {\r\n        const file = files[i];\r\n        const reader = new FileReader();\r\n        reader.onload = () => {\r\n          const url = reader.result;\r\n          const extension = file.name.split('.').pop().toLowerCase();\r\n          this.images.push({ id: Date.now(), url: url, extension: extension });\r\n        };\r\n        reader.readAsDataURL(file);\r\n      }\r\n    },\r\n    deleteImage(index) {\r\n      this.images.splice(index, 1);\r\n    },\r\n    upload() {\r\n      const fileTypes = ['jpg', 'jpeg', 'png'];\r\n\r\n      if (this.images.length === 0) {\r\n        this.$message.error('No files to upload');\r\n        return;\r\n      }\r\n\r\n      this.uploading = true;\r\n      this.uploadProgress = 0;\r\n      this.uploadTips = [];\r\n\r\n      const formData = new FormData();\r\n\r\n      for (let i = 0; i < this.images.length; i++) {\r\n        const image = this.images[i];\r\n        const extension = image.extension;\r\n\r\n        if (fileTypes.includes(extension)) {\r\n          const file = this.dataURLtoFile(image.url, `image_${i + 1}.${extension}`);\r\n          formData.append('file[]', file);\r\n          formData.append('id[]', image.id);\r\n        } else {\r\n          this.$message.error('Unsupported file type');\r\n          this.uploading = false;\r\n          return;\r\n        }\r\n      }\r\n\r\n      formData.append('createrId', this.user.id);\r\n      formData.append('fileType', 'YOUR_FILE_TYPE'); // Replace with your file type\r\n\r\n      const xhr = new XMLHttpRequest();\r\n      xhr.upload.onprogress = (e) => {\r\n        this.uploadProgress = parseFloat(((e.loaded / e.total) * 100).toFixed(2));\r\n      };\r\n\r\n      xhr.open('POST', 'https://simplerevise.com/api/project/uploadPublicMultiple/', true);\r\n      xhr.onreadystatechange = () => {\r\n        if (xhr.status === 200 && xhr.readyState === 4) {\r\n          const data = JSON.parse(xhr.response);\r\n          done();\r\n          // that.setGroup(r);\r\n          that.$message.success('success');\r\n        }\r\n      };\r\n\r\n      xhr.onerror = () => {\r\n        this.$message.error('System Error: #500');\r\n        this.uploading = false;\r\n      };\r\n\r\n      xhr.send(formData);\r\n      alert('Upload successful');\r\n      this.$router.go(-1);\r\n    },\r\n    goBack() {\r\n      this.$router.go(-1);\r\n    },\r\n    dataURLtoFile(dataURL, filename) {\r\n      const arr = dataURL.split(',');\r\n      const mime = arr[0].match(/:(.*?);/)[1];\r\n      const bstr = atob(arr[1]);\r\n      const n = bstr.length;\r\n      const u8arr = new Uint8Array(n);\r\n      for (let i = 0; i < n; i++) {\r\n        u8arr[i] = bstr.charCodeAt(i);\r\n      }\r\n      return new File([u8arr], filename, { type: mime });\r\n    },\r\n  },\r\n};\r\n</script>\r\n  \r\n  \r\n<style lang=\"less\" scoped>\r\n.container {\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 20px;\r\n  box-sizing: border-box;\r\n  overflow-y: auto;\r\n  max-height: 500px;\r\n}\r\n\r\n.header {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  margin-bottom: 20px;\r\n  padding: 20px;\r\n}\r\n\r\n.center-text {\r\n  text-align: center;\r\n  flex-grow: 1;\r\n}\r\n\r\n.content {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.drag-drop-field {\r\n  border: 2px dashed #ccc;\r\n  padding: 20px;\r\n  margin-bottom: 20px;\r\n  text-align: center;\r\n  // height: 120px;\r\n  /* Set the height to 50% */\r\n}\r\n\r\n.image-item {\r\n  display: inline-block;\r\n  position: relative;\r\n  margin-right: 10px;\r\n  margin-bottom: 10px;\r\n  width: 20%;\r\n  height: 200px;\r\n  object-fit: cover;\r\n}\r\n\r\n.image-item img {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.delete-button {\r\n  position: absolute;\r\n  top: 5px;\r\n  right: 5px;\r\n  background: none;\r\n  border: none;\r\n  color: red;\r\n  cursor: pointer;\r\n  font-size: 12px;\r\n}\r\n\r\n.upload-info {\r\n  margin-top: 10px;\r\n  font-size: 14px;\r\n  color: #999;\r\n  text-align: center;\r\n}\r\n\r\n.footer {\r\n  display: flex;\r\n  justify-content: center;\r\n  /* Center the buttons horizontally */\r\n  align-items: center;\r\n  /* Center the buttons vertically */\r\n  margin-top: 20px;\r\n  padding: 20px;\r\n}\r\n\r\n.footer button {\r\n  margin-left: 10px;\r\n}\r\n\r\n.cancel-button,\r\n.upload-button {\r\n  flex: 0 0 auto;\r\n  /* Disable button stretching */\r\n}\r\n\r\n.cancel-button {\r\n  margin-right: 10px;\r\n  /* Add margin between buttons */\r\n}\r\n\r\n.upload-button {\r\n  margin-left: 10px;\r\n  /* Add margin between buttons */\r\n}\r\n\r\n.delete-button {\r\n  position: absolute;\r\n  top: 5px;\r\n  right: 5px;\r\n  width: 20px;\r\n  height: 20px;\r\n  background-color: white;\r\n  border-radius: 50%;\r\n  border: none;\r\n  color: black;\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.delete-button:before {\r\n  content: 'x';\r\n}\r\n\r\n.file-upload-button {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  padding: 10px 20px;\r\n  background-color: #ccc;\r\n  color: #333;\r\n  cursor: pointer;\r\n  margin-bottom: 20px;\r\n  text-align: center;\r\n}\r\n</style>","import mod from \"-!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./public_upload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./public_upload.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./public_upload.vue?vue&type=template&id=c8ea4bc0&scoped=true&\"\nimport script from \"./public_upload.vue?vue&type=script&lang=js&\"\nexport * from \"./public_upload.vue?vue&type=script&lang=js&\"\nimport style0 from \"./public_upload.vue?vue&type=style&index=0&id=c8ea4bc0&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c8ea4bc0\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","_v","_s","lang","tips17","style","height","images","length","on","handleDrop","$event","preventDefault","_l","image","index","key","attrs","url","deleteImage","staticStyle","handleFileSelection","tips18","tips19","goBack","tips3","uploading","upload","tips20","staticRenderFns","data","uploadProgress","uploadTips","user","created","$lang","JSON","parse","localStorage","getItem","projects","substring","list","loading","getList","methods","event","files","dataTransfer","handleFiles","target","i","file","reader","FileReader","onload","result","extension","name","split","pop","toLowerCase","push","id","Date","now","readAsDataURL","splice","fileTypes","$message","error","formData","FormData","includes","dataURLtoFile","append","xhr","XMLHttpRequest","onprogress","e","parseFloat","loaded","total","toFixed","open","onreadystatechange","status","readyState","response","done","that","success","onerror","send","alert","$router","go","dataURL","filename","arr","mime","match","bstr","atob","n","u8arr","Uint8Array","charCodeAt","File","type","component"],"sourceRoot":""}