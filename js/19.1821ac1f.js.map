{"version":3,"file":"js/19.1821ac1f.js","mappings":"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","sources":["webpack://designer/./src/views/group.vue?f2a6","webpack://designer/src/views/group.vue","webpack://designer/./src/views/group.vue?e2e0","webpack://designer/./src/views/group.vue","webpack://designer/./src/tools/timer.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"group\"},[_c('div',{staticClass:\"group_head\"},[_c('div',[_vm._v(_vm._s(_vm.lang.tips8)+\" (\"+_vm._s(_vm.group.length)+\")\")]),_c('el-button',{staticStyle:{\"background\":\"#345CA0\",\"border-radius\":\"12px\",\"padding\":\"15px 24px\",\"border-width\":\"0px\"},attrs:{\"type\":\"primary\",\"size\":\"small\",\"icon\":\"el-icon-plus\",\"disabled\":_vm.isButtonDisabled},on:{\"click\":_vm.addProject}},[_vm._v(\" \"+_vm._s(_vm.lang.add)+\" \")])],1),_c('div',{staticClass:\"group_item\"},[(_vm.group.length == 0)?_c('div',{staticClass:\"nodata\"},[_c('el-empty',{attrs:{\"description\":_vm.lang.nodata}})],1):_vm._e(),_vm._l((_vm.group),function(item){return _c('div',{key:item.id,staticClass:\"box\"},[_c('div',{staticClass:\"main\",on:{\"click\":function($event){return _vm.goProject(item.id)}}},[_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(item.loading),expression:\"item.loading\"}],staticClass:\"cover\",attrs:{\"element-loading-text\":_vm.lang.loading + '...'}},[_c('img',{staticClass:\"project_cover\",attrs:{\"src\":'https://www.simplerevise.com/img/project/v2/thumbnail/' + item.cover + '.jpg',\"alt\":\"\"}})])]),_c('div',{staticClass:\"title\"},[_c('div',{staticClass:\"action\"},[_c('i',{staticClass:\"el-icon-share\",on:{\"click\":function($event){return _vm.share(item.id)}}}),_c('i',{staticClass:\"el-icon-edit\",on:{\"click\":function($event){return _vm.rename(item.id)}}}),_c('i',{staticClass:\"el-icon-delete\",on:{\"click\":function($event){return _vm.del(item.id)}}})]),_c('p',[_vm._v(_vm._s(item.group_name))]),_c('p',[_vm._v(_vm._s(item.user_name)+\" · \"+_vm._s(item.create_time))])])])})],2)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"group\" v-loading=\"loading\">\r\n        <div class=\"group_head\">\r\n            <div>{{ lang.tips8 }} ({{ group.length }})</div>\r\n            <el-button type=\"primary\" size=\"small\" icon=\"el-icon-plus\" @click=\"addProject\" :disabled=\"isButtonDisabled\"\r\n                style=\"background: #345CA0;border-radius: 12px;padding: 15px 24px;border-width: 0px;\">\r\n                {{ lang.add }}\r\n            </el-button>\r\n        </div>\r\n        <div class=\"group_item\">\r\n            <div class=\"nodata\" v-if=\"group.length == 0\"><el-empty :description=\"lang.nodata\"></el-empty></div>\r\n            <div class=\"box\" v-for=\"item in group\" :key=\"item.id\">\r\n                <div class=\"main\" @click=\"goProject(item.id)\">\r\n                    <div class=\"cover\" v-loading=\"item.loading\" :element-loading-text=\"lang.loading + '...'\">\r\n                        <img class=\"project_cover\" :src=\"'https://www.simplerevise.com/img/project/v2/thumbnail/' + item.cover + '.jpg'\" alt=\"\">\r\n                    </div>\r\n                </div>\r\n                <div class=\"title\">\r\n                    <div class=\"action\">\r\n                        <i class=\"el-icon-share\" @click=\"share(item.id)\"></i>\r\n                        <i class=\"el-icon-edit\" @click=\"rename(item.id)\"></i>\r\n                        <i class=\"el-icon-delete\" @click=\"del(item.id)\"></i>\r\n                    </div>\r\n                    <p>{{ item.group_name }}</p>\r\n                    <p>{{ item.user_name }} · {{ item.create_time }}</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport timer from '../tools/timer';\r\nimport global from '@/tools/global';\r\nexport default {\r\n    name: 'group',\r\n    data() {\r\n        return {\r\n            user: {},\r\n            group: [],\r\n            loading: true,\r\n            global,\r\n            httping: false,\r\n            lang: {}\r\n        }\r\n    },\r\n    created() {\r\n        this.lang = this.$lang('group');\r\n        this.user = JSON.parse(localStorage.getItem('designer_user'));\r\n\r\n        // 没有参与项目\r\n        if (this.user.projects.substring(1).length == 0) {\r\n            this.group = [];\r\n            this.loading = false;\r\n            return;\r\n        }\r\n\r\n        this.getgroup();\r\n\r\n    },\r\n    computed: {\r\n        isButtonDisabled() {\r\n            const user = JSON.parse(localStorage.getItem('designer_user'));\r\n            const userProjects = user.projects.substring(1);\r\n            const numProjects = userProjects.length > 0 ? userProjects.split(',').length : 0;\r\n\r\n            // Check if any item in the group array has reached its maximum projects\r\n            const isAnyItemMaxedOut = this.group.some(item => item.max_projects <= numProjects);\r\n\r\n            return isAnyItemMaxedOut;\r\n        }\r\n    },\r\n    methods: {\r\n        // 获取项目组列表\r\n        getgroup() {\r\n            // 根据id列表获取项目信息\r\n            this.user.projects = this.user.projects.substring(1);\r\n            if (this.user.projects[0] == ',') {\r\n                this.user.projects = this.user.projects.substring(1);\r\n            }\r\n            this.$ajax.get('/group/list/?ids=' + this.user.projects + '&createrId=' + this.user.id).then(r => {\r\n                this.group = r.map(item => {\r\n                    item.create_time = timer.time('y-m-d', item.create_time * 1000);\r\n                    item.loading = true;\r\n                    return item;\r\n                });\r\n\r\n                // 处理封面展示方式，横图 = row，竖图 = col\r\n                this.$nextTick(() => {\r\n                    let imgs = document.querySelectorAll('.project_cover');\r\n                    imgs.forEach((item, index) => {\r\n                        let img = new Image();\r\n                        img.onload = () => {\r\n                            this.group[index].loading = false;\r\n                            if (img.width > img.height) {\r\n                                item.classList.add('row');\r\n                            } else {\r\n                                item.classList.add('col');\r\n                            }\r\n                        }\r\n                        img.src = item.src;\r\n                    })\r\n                    this.loading = false;\r\n                })\r\n            })\r\n        },\r\n        // 分享项目名\r\n        share(id) {\r\n            this.group.map(item => {\r\n                if (item.id == id) {\r\n                    this.$copy(id, item.group_name);\r\n                }\r\n            })\r\n        },\r\n        // 重命名\r\n        rename(id) {\r\n            let that = this;\r\n            that.$prompt(that.lang.tips2, that.lang.tips1, {\r\n                inputPattern: /\\S/,\r\n                inputErrorMessage: that.lang.tips5,\r\n                closeOnPressEscape: false,\r\n                closeOnClickModal: false,\r\n                cancelButtonText: that.lang.tips3,\r\n                confirmButtonText: that.lang.tips4,\r\n                beforeClose(action, instance, done) {\r\n                    if (action == 'confirm') {\r\n                        if (that.httping) return;\r\n                        that.httping = true;\r\n                        that.$ajax.post('/group/rename', {\r\n                            id,\r\n                            name: instance.inputValue\r\n                        }).then(r => {\r\n                            that.$message.success('success');\r\n                            that.group.map(item => {\r\n                                if (item.id == id) {\r\n                                    item.group_name = instance.inputValue;\r\n                                }\r\n                            })\r\n                            done();\r\n                            setTimeout(() => {\r\n                                that.httping = false;\r\n                            }, 300)\r\n                        })\r\n                    } else {\r\n                        done();\r\n                    }\r\n                }\r\n            }).catch(() => { });\r\n        },\r\n        // 删除项目\r\n        del(id) {\r\n            let that = this;\r\n            this.$confirm(that.lang.tips7, that.lang.tips6, {\r\n                type: 'warning',\r\n                closeOnPressEscape: false,\r\n                closeOnClickModal: false,\r\n                cancelButtonText: that.lang.tips3,\r\n                confirmButtonText: that.lang.tips4,\r\n                beforeClose(action, instance, done) {\r\n                    if (action == 'confirm') {\r\n                        if (that.httping) return;\r\n                        that.httping = true;\r\n                        let index = 0;\r\n                        that.group.some((item, i) => {\r\n                            if (item.id == id) {\r\n                                index = i;\r\n                                return true;\r\n                            }\r\n                        });\r\n                        that.$ajax.get('/group/del/?id=' + id + '&createrId=' + that.user.id).then(r => {\r\n                            that.group.splice(index, 1);\r\n                            that.$message.success('success');\r\n                            done();\r\n                            setTimeout(() => {\r\n                                that.httping = false;\r\n                            }, 300);\r\n                            // Update the user's projects and trigger computed property update\r\n                            that.updateUserProjects();\r\n                        });\r\n                    } else {\r\n                        done();\r\n                    }\r\n                }\r\n            }).catch(() => { });\r\n        },\r\n\r\n        // Update user's projects and trigger computed property update\r\n        updateUserProjects() {\r\n            const user = JSON.parse(localStorage.getItem('designer_user'));\r\n            const projectIds = this.group.map(item => item.id).join(',');\r\n            user.projects = ',' + projectIds;\r\n            localStorage.setItem('designer_user', JSON.stringify(user));\r\n        },\r\n        // 查看项目\r\n        goProject(id) {\r\n            this.$router.push({\r\n                path: '/list',\r\n                query: { id }\r\n            })\r\n        },\r\n        // 添加新项目\r\n        addProject() {\r\n            let that = this;\r\n            that.$prompt(that.lang.tips5, that.lang.add, {\r\n                inputPattern: /\\S/,\r\n                inputErrorMessage: that.lang.tips5,\r\n                closeOnPressEscape: false,\r\n                closeOnClickModal: false,\r\n                cancelButtonText: that.lang.tips3,\r\n                confirmButtonText: that.lang.tips4,\r\n                beforeClose(action, instance, done) {\r\n                    if (action == 'confirm') {\r\n                        if (that.httping) return;\r\n                        that.httping = true;\r\n                        that.$ajax.post('/group/add', {\r\n                            name: instance.inputValue,\r\n                            createrId: JSON.parse(localStorage.getItem('designer_user')).id\r\n                        }).then(r => {\r\n                            done();\r\n                            that.setGroup(r);\r\n                            that.$message.success('success');\r\n                            setTimeout(() => {\r\n                                that.httping = false;\r\n                            }, 300)\r\n                        })\r\n                    } else {\r\n                        done();\r\n                    }\r\n                }\r\n            }).catch(() => { });\r\n        },\r\n        // 更新项目id\r\n        setGroup(r) {\r\n            this.user.projects = r;\r\n            localStorage.setItem('designer_user', JSON.stringify(this.user));\r\n            this.getgroup();\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n@import url('../tools/common.less');\r\n\r\n.group {\r\n    width: calc(100% - 60px);\r\n    height: 100%;\r\n    padding: 0 30px;\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    align-content: flex-start;\r\n    flex-wrap: wrap;\r\n    overflow-x: hidden;\r\n    overflow-y: auto;\r\n\r\n    .group_head {\r\n        width: calc(100% - 20px);\r\n        height: 40px;\r\n        padding: 20px 10px;\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n\r\n        div {\r\n            font-weight: 700;\r\n            font-size: 24px;\r\n            line-height: 29px;\r\n        }\r\n    }\r\n\r\n    .group_item {\r\n        width: 100%;\r\n        height: calc(100% - 80px);\r\n        display: flex;\r\n        justify-content: flex-start;\r\n        align-content: flex-start;\r\n        flex-wrap: wrap;\r\n        overflow-x: hidden;\r\n        overflow-y: auto;\r\n\r\n        .nodata {\r\n            width: 100%;\r\n            height: 70%;\r\n            display: flex;\r\n            justify-content: center;\r\n            align-items: center;\r\n        }\r\n\r\n        .box {\r\n            width: 230px;\r\n            //height: 265px;\r\n            background: #FFFFFF;\r\n            border-radius: 12px;\r\n            margin: 10px;\r\n            padding: 15px;\r\n            box-shadow: 0px 3px 7px 0px rgba(0, 0, 0, 0.0500);\r\n\r\n            .main {\r\n                width: 230px;\r\n                height: 230px;\r\n                background: #F5F5F7;\r\n                border-radius: 8px;\r\n                transition: all 0.3s;\r\n                cursor: pointer;\r\n\r\n                .cover {\r\n                    width: 230px;\r\n                    height: 230px;\r\n\r\n                    img.row {\r\n                        width: 100%;\r\n                        border-radius: 8px;\r\n                    }\r\n\r\n                    img.col {\r\n                        height: 100%;\r\n                        border-radius: 8px;\r\n                    }\r\n                }\r\n            }\r\n\r\n            .title {\r\n                text-align: left;\r\n                font-weight: 600;\r\n                font-size: 14px;\r\n                color: #000000;\r\n                margin-top: 15px;\r\n                position: relative;\r\n\r\n                p {\r\n                    line-height: 25px;\r\n                }\r\n\r\n                p:last-child {\r\n                    font-weight: 400;\r\n                    font-size: 12px;\r\n                    color: #86868B;\r\n                }\r\n\r\n                .action {\r\n                    position: absolute;\r\n                    left: 50%;\r\n                    top: 50%;\r\n                    transform: translateX(-50%) translateY(-50%);\r\n                    -webkit-transform: translateX(-50%) translateY(-50%);\r\n                    transition: all ease 0.35s;\r\n                    width: 100%;\r\n                    z-index: 2;\r\n                    text-align: center;\r\n                    opacity: 0;\r\n\r\n                    i {\r\n                        font-size: 14px;\r\n                        color: #000000;\r\n                        cursor: pointer;\r\n                        border-radius: 50%;\r\n                        padding: 8px;\r\n                        margin: 0px 10px;\r\n                        background-color: #FFFFFF;\r\n                        box-shadow: 0px 12px 16px -4px rgba(16, 24, 40, 0.08), 0px 4px 6px -2px rgba(16, 24, 40, 0.03);\r\n                    }\r\n                }\r\n\r\n                &:before {\r\n                    background: #FFFFFF;\r\n                    content: '';\r\n                    height: 100%;\r\n                    left: 0;\r\n                    opacity: 0;\r\n                    position: absolute;\r\n                    top: 0;\r\n                    transition: all ease 0.35s;\r\n                    width: 100%;\r\n                }\r\n            }\r\n\r\n            &:hover {\r\n                .title .action {\r\n                    opacity: 1;\r\n                }\r\n\r\n                .title:before {\r\n                    opacity: 0.9;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    .group_item::-webkit-scrollbar {\r\n        display: none;\r\n    }\r\n}\r\n</style>","import mod from \"-!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./group.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./group.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./group.vue?vue&type=template&id=66190e43&scoped=true&\"\nimport script from \"./group.vue?vue&type=script&lang=js&\"\nexport * from \"./group.vue?vue&type=script&lang=js&\"\nimport style0 from \"./group.vue?vue&type=style&index=0&id=66190e43&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"66190e43\",\n  null\n  \n)\n\nexport default component.exports","/**\r\n * 时间插件\r\n */\r\n\r\nconst timer = {\r\n\t// 小于10的数字前面补0\r\n\tto2: number => Number(number) < 10 ? `0${number}` : String(number),\r\n\r\n\t// 获取指定时间\r\n\ttime (format = 'y-m-d', time = null){\r\n\t\tlet date = time ? new Date(time) : new Date();\r\n\t\tformat = format.replace('y', date.getFullYear());\r\n\t\tformat = format.replace('m', this.to2(date.getMonth() + 1));\r\n\t\tformat = format.replace('d', this.to2(date.getDate()));\r\n\t\tformat = format.replace('h', this.to2(date.getHours()));\r\n\t\tformat = format.replace('i', this.to2(date.getMinutes()));\r\n\t\tformat = format.replace('s', this.to2(date.getSeconds()));\r\n\t\tformat = format.replace('w', date.getDay());\r\n\t\treturn format;\r\n\t},\r\n\r\n\t// 获取当前月份有多少天\r\n\tmonthLength (time = null){\r\n\t\tlet y = this.time('y', time) * 1;\r\n\t\tlet m = this.to2(this.time('m', time) * 1 + 1);\r\n\t\tlet unix = new Date(`${y}-${m}-01`).getTime() - 24 * 60 * 60 * 1000;\r\n\t\treturn Number(this.time('d', unix));\r\n\t},\r\n\r\n\t// 获取上个月有多少天\r\n\tpreMonthLenggth (time = null){\r\n\t\tlet y = this.time('y', time) * 1;\r\n\t\tlet m = this.to2(this.time('m', time) * 1);\r\n\t\tlet unix = new Date(`${y}-${m}-01`).getTime() - 24 * 60 * 60 * 1000;\r\n\t\treturn Number(this.time('d', unix));\r\n\t},\r\n\r\n\t// 获取下个月有多少天\r\n\tnextMonthLenggth (time = null){\r\n\t\tlet y = this.time('y', time) * 1;\r\n\t\tlet m = this.to2(this.time('m', time) * 1 + 2);\r\n\t\tlet unix = new Date(`${y}-${m}-01`).getTime() - 24 * 60 * 60 * 1000;\r\n\t\treturn Number(this.time('d', unix));\r\n\t},\r\n\r\n\t// 获取当月第一天\r\n\tmonthFirst (time = null){\r\n\t\tlet unix = this.time('y-m', time) + '-01';\r\n\t\treturn this.time('y-m-d', unix);\r\n\t},\r\n\r\n\t// 获取当月最后一天\r\n\tmonthLast (time = null){\r\n\t\tlet y = this.time('y', time) * 1;\r\n\t\tlet m = this.to2(this.time('m', time) * 1 + 1);\r\n\t\tlet unix = new Date(`${y}-${m}-01`).getTime() - 24 * 60 * 60 * 1000;\r\n\t\treturn this.time('y-m-d', unix);\r\n\t},\r\n\r\n\t// 获取上个月的今天\r\n\tpreMonthToday (time = null){\r\n\t\tlet y = this.time('y', time);\r\n\t\tlet m = this.to2(this.time('m', time) * 1 - 1);\r\n\t\tlet d = this.time('d', time);\r\n\t\treturn this.time('y-m-d', `${y}-${m}-${d}`);\r\n\t},\r\n\r\n\t// 获取下个月的今天\r\n\tnextMonthToday (time = null){\r\n\t\tlet y = this.time('y', time);\r\n\t\tlet m = this.to2(this.time('m', time) * 1 + 1);\r\n\t\tlet d = this.time('d', time);\r\n\t\treturn this.time('y-m-d', `${y}-${m}-${d}`);\r\n    },\r\n    \r\n    // 已经过去了多少时间\r\n    timeout (time){\r\n\r\n    },\r\n\r\n    // 倒计时\r\n    timeRemaining (time, format){\r\n        time = time - parseInt(new Date().getTime()/1000);\r\n        return this.unixToString(format, time);\r\n    },\r\n\r\n    // 时间戳的差值转化为时间字符串\r\n    unixToString (format, time){\r\n        let d = parseInt(time / 60 / 60 / 24);\r\n        let h = parseInt((time - d * 86400) / 3600);\r\n        let i = parseInt((time - d * 86400 - h * 3600) / 60);\r\n        let s = time - d * 86400 - h * 3600 - i * 60;\r\n        format = format.replace('d', timer.to2(timer.low(d)));\r\n        format = format.replace('h', timer.to2(timer.low(h)));\r\n        format = format.replace('i', timer.to2(timer.low(i)));\r\n        format = format.replace('s', timer.to2(timer.low(s)));\r\n        return format;\r\n    },\r\n\r\n    // 小于0的直接输出0\r\n    low (num){\r\n        return num < 0 ? 0 : num;\r\n    },\r\n\r\n\t// 把日期转成对象\r\n\tparse (string){\r\n\t\treturn new Date(string);\r\n\t}\r\n}\r\n\r\nexport default timer;"],"names":["render","_vm","this","_c","_self","directives","name","rawName","value","expression","staticClass","_v","_s","lang","tips8","group","length","staticStyle","attrs","isButtonDisabled","on","addProject","add","nodata","_e","_l","item","key","id","$event","goProject","loading","cover","share","rename","del","group_name","user_name","create_time","staticRenderFns","data","user","global","httping","created","$lang","JSON","parse","localStorage","getItem","projects","substring","getgroup","computed","userProjects","numProjects","split","isAnyItemMaxedOut","some","max_projects","methods","$ajax","get","then","r","map","timer","time","$nextTick","imgs","document","querySelectorAll","forEach","index","img","Image","onload","width","height","classList","src","$copy","that","$prompt","tips2","tips1","inputPattern","inputErrorMessage","tips5","closeOnPressEscape","closeOnClickModal","cancelButtonText","tips3","confirmButtonText","tips4","beforeClose","action","instance","done","post","inputValue","$message","success","setTimeout","catch","$confirm","tips7","tips6","type","i","splice","updateUserProjects","projectIds","join","setItem","stringify","$router","push","path","query","createrId","setGroup","component","to2","number","Number","String","format","date","Date","replace","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getDay","monthLength","y","m","unix","getTime","preMonthLenggth","nextMonthLenggth","monthFirst","monthLast","preMonthToday","d","nextMonthToday","timeout","timeRemaining","parseInt","unixToString","h","s","low","num","string"],"sourceRoot":""}