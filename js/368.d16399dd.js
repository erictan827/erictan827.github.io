"use strict";(self["webpackChunkdesigner"]=self["webpackChunkdesigner"]||[]).push([[368],{1368:(t,e,i)=>{i.r(e),i.d(e,{default:()=>p});var s=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"list"},[2!=t.user.role?e("div",{staticClass:"list_head"},[e("div",{staticClass:"left-button"},[e("el-button",{staticStyle:{color:"#000000","border-width":"0px","background-color":"unset","font-weight":"500"},attrs:{type:"primary",size:"small",icon:"el-icon-arrow-left",plain:""},on:{click:t.goBack}},[t._v(t._s(t.lang.back))])],1),e("div",{staticClass:"design-style-preference"},[e("span",{staticClass:"text"},[t._v(t._s(t.lang.tips8))])]),e("div",{staticClass:"preference"},[e("el-button",{staticStyle:{background:"#345CA0","border-radius":"12px",color:"white",padding:"15px 24px","border-width":"0px"},attrs:{type:"primary",size:"small"},on:{click:t.addProject}},[t._v(t._s(t.lang.tips9))])],1)]):t._e(),e("div",{staticClass:"list_item"},[0==t.list.length?e("div",{staticClass:"nodata"},[e("el-empty",{attrs:{description:t.lang.nodata}})],1):t._e(),t._l(t.list,(function(i){return e("div",{key:i.id,staticClass:"box"},[e("div",{staticClass:"main",on:{click:function(e){return t.goProject(i.id)}}},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:i.loading,expression:"item.loading"}],staticClass:"cover",attrs:{"element-loading-text":t.lang.loading+"..."}},[e("img",{staticClass:"project_cover",attrs:{src:"https://www.simplerevise.com/img/project/testimg/thumbnail/"+i.cover+".jpg",alt:""}})])]),e("div",{staticClass:"title"},[e("div",{staticClass:"action"},[e("i",{staticClass:"el-icon-share",on:{click:function(e){return t.share(i.id)}}}),e("i",{staticClass:"el-icon-edit",on:{click:function(e){return t.rename(i.id)}}}),e("i",{staticClass:"el-icon-delete",on:{click:function(e){return t.del(i.id)}}})]),e("p",[t._v(t._s(i.group_name))]),e("p",[t._v(t._s(i.user_name)+" Â· "+t._s(i.create_time))])])])}))],2),e("el-dialog",{attrs:{title:"Share Link",visible:t.showLinkPrompt,"show-close":!1,width:"400px"},on:{"update:visible":function(e){t.showLinkPrompt=e}}},[e("div",{staticStyle:{"margin-top":"-20px",display:"flex","align-items":"center"}},[e("el-input",{attrs:{readonly:""},model:{value:t.generatedLink,callback:function(e){t.generatedLink=e},expression:"generatedLink"}}),e("el-button",{staticStyle:{"margin-left":"10px",background:"#345CA0",color:"white"},attrs:{type:"primary"},on:{click:t.copyLink}},[t._v("Copy")])],1)])],1)},n=[],r=i(3675),a=i(4453);const o={name:"board",data(){return{user:{},list:[],loading:!0,httping:!1,global:a.Z,lang:{},showConfirmation:!1,boardName:"",generatedLink:"",showLinkPrompt:!1}},created(){if(this.lang=this.$lang("board"),this.user=JSON.parse(localStorage.getItem("designer_user")),0==this.user.projects.substring(1).length)return this.list=[],void(this.loading=!1);this.getList()},methods:{getList(){this.user.projects=this.user.projects.substring(1),","==this.user.projects[0]&&(this.user.projects=this.user.projects.substring(1)),this.$ajax.get("/project/list_board/?id="+this.$route.query.id).then((t=>{this.list=t.map((t=>(t.create_time=r.Z.time("y-m-d",1e3*t.create_time),t.loading=!0,t))),this.$nextTick((()=>{let t=document.querySelectorAll(".project_cover");t.forEach(((t,e)=>{let i=new Image;i.onload=()=>{this.list[e].loading=!1,i.width>i.height?t.classList.add("row"):t.classList.add("col")},i.src=t.src})),this.loading=!1}))}))},goProject(t){this.$router.push({path:"library",query:{id:t}})},del(t){let e=this;this.$confirm(e.lang.tips7,e.lang.tips6,{type:"warning",closeOnPressEscape:!1,closeOnClickModal:!1,cancelButtonText:e.lang.tips3,confirmButtonText:e.lang.tips4,beforeClose(i,s,n){if("confirm"==i){if(e.httping)return;e.httping=!0;let i=0;e.list.some(((e,s)=>{if(e.id==t)return i=s,!0})),e.$ajax.get("/group/del_board/?id="+t).then((t=>{e.list.splice(i,1),e.$message.success("success"),n(),setTimeout((()=>{e.httping=!1}),300)}))}else n()}}).catch((()=>{}))},rename(t){let e=this;e.$prompt(e.lang.tips2,e.lang.tips1,{inputPattern:/\S/,inputErrorMessage:e.lang.tips5,closeOnPressEscape:!1,closeOnClickModal:!1,cancelButtonText:e.lang.tips3,confirmButtonText:e.lang.tips4,beforeClose(i,s,n){if("confirm"==i){if(e.httping)return;e.httping=!0,e.$ajax.post("/group/rename_board",{id:t,name:s.inputValue}).then((i=>{e.$message.success("success"),e.list.map((e=>(e.id==t&&(e.group_name=s.inputValue),e))),n(),e.httping=!1}))}else n()}}).catch((()=>{}))},share(t){const e=`${window.location.origin}/#/share?id=${t}`;this.generatedLink=e,this.showLinkPrompt=!0},goBack(){this.$router.go(-1)},addProject(){let t=this;t.$prompt(t.lang.tips5,t.lang.add,{inputPattern:/\S/,inputErrorMessage:t.lang.tips5,closeOnPressEscape:!1,closeOnClickModal:!1,cancelButtonText:t.lang.tips3,confirmButtonText:t.lang.tips4,beforeClose(e,i,s){if("confirm"==e){if(t.httping)return;t.httping=!0;const e=t.$route.query.id;t.$ajax.post("/group/add_board",{group_name:i.inputValue,createrId:JSON.parse(localStorage.getItem("designer_user")).id,projectId:e}).then((e=>{s(),t.getList(e),t.$message.success("success"),setTimeout((()=>{t.httping=!1}),300)}))}else s()}}).catch((()=>{}))},setList(t){this.user.projects=t,localStorage.setItem("designer_user",JSON.stringify(this.user)),this.getList()},copyLink(){navigator.clipboard.writeText(this.generatedLink).then((()=>{this.$message.success("Link copied to clipboard")})).catch((t=>{console.error("Failed to copy link to clipboard:",t),this.$message.error("Failed to copy link to clipboard")}))}}},l=o;var c=i(3736),d=(0,c.Z)(l,s,n,!1,null,"16963875",null);const p=d.exports},3675:(t,e,i)=>{i.d(e,{Z:()=>n});const s={to2:t=>Number(t)<10?`0${t}`:String(t),time(t="y-m-d",e=null){let i=e?new Date(e):new Date;return t=t.replace("y",i.getFullYear()),t=t.replace("m",this.to2(i.getMonth()+1)),t=t.replace("d",this.to2(i.getDate())),t=t.replace("h",this.to2(i.getHours())),t=t.replace("i",this.to2(i.getMinutes())),t=t.replace("s",this.to2(i.getSeconds())),t=t.replace("w",i.getDay()),t},monthLength(t=null){let e=1*this.time("y",t),i=this.to2(1*this.time("m",t)+1),s=new Date(`${e}-${i}-01`).getTime()-864e5;return Number(this.time("d",s))},preMonthLenggth(t=null){let e=1*this.time("y",t),i=this.to2(1*this.time("m",t)),s=new Date(`${e}-${i}-01`).getTime()-864e5;return Number(this.time("d",s))},nextMonthLenggth(t=null){let e=1*this.time("y",t),i=this.to2(1*this.time("m",t)+2),s=new Date(`${e}-${i}-01`).getTime()-864e5;return Number(this.time("d",s))},monthFirst(t=null){let e=this.time("y-m",t)+"-01";return this.time("y-m-d",e)},monthLast(t=null){let e=1*this.time("y",t),i=this.to2(1*this.time("m",t)+1),s=new Date(`${e}-${i}-01`).getTime()-864e5;return this.time("y-m-d",s)},preMonthToday(t=null){let e=this.time("y",t),i=this.to2(1*this.time("m",t)-1),s=this.time("d",t);return this.time("y-m-d",`${e}-${i}-${s}`)},nextMonthToday(t=null){let e=this.time("y",t),i=this.to2(1*this.time("m",t)+1),s=this.time("d",t);return this.time("y-m-d",`${e}-${i}-${s}`)},timeout(t){},timeRemaining(t,e){return t-=parseInt((new Date).getTime()/1e3),this.unixToString(e,t)},unixToString(t,e){let i=parseInt(e/60/60/24),n=parseInt((e-86400*i)/3600),r=parseInt((e-86400*i-3600*n)/60),a=e-86400*i-3600*n-60*r;return t=t.replace("d",s.to2(s.low(i))),t=t.replace("h",s.to2(s.low(n))),t=t.replace("i",s.to2(s.low(r))),t=t.replace("s",s.to2(s.low(a))),t},low(t){return t<0?0:t},parse(t){return new Date(t)}},n=s}}]);
//# sourceMappingURL=368.d16399dd.js.map