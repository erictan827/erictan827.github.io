"use strict";(self["webpackChunkdesigner"]=self["webpackChunkdesigner"]||[]).push([[684],{5684:(e,t,i)=>{i.r(t),i.d(t,{default:()=>g});var s=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"list"},[t("div",{staticClass:"list_head"},[t("div",{staticClass:"design-style-preference"},[t("span",{staticClass:"text"},[e._v(e._s(e.lang.tips31))])]),t("div",{staticClass:"preference"},[t("div",{staticClass:"upload"},[t("el-select",{attrs:{placeholder:"All"},model:{value:e.selectedTag,callback:function(t){e.selectedTag=t},expression:"selectedTag"}},[t("el-option",{attrs:{value:""}},[e._v("All")]),e._l(e.tags,(function(e){return t("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})}))],2),0==e.user.role?t("router-link",{attrs:{to:e.goViewTagList()}},[t("el-button",{staticClass:"el-button",staticStyle:{background:"#345CA0",color:"white"}},[e._v(e._s(e.lang.tips29))])],1):e._e(),t("router-link",{attrs:{to:e.goViewUserPreference()}},[t("el-button",{staticClass:"el-button",staticStyle:{background:"#345CA0",color:"white"}},[e._v(e._s(e.lang.tips21))])],1),t("router-link",{attrs:{to:e.goChooseFromPublic()}},[t("el-button",{staticClass:"el-button",staticStyle:{background:"#345CA0",color:"white"}},[e._v(e._s(e.lang.tips25))])],1),t("router-link",{attrs:{to:e.getDesignPreferenceLink()}},[t("el-button",{staticClass:"el-button",staticStyle:{background:"#345CA0",color:"white"}},[e._v(e._s(e.lang.up))])],1),t("el-button",{staticClass:"el-button",staticStyle:{background:"#345CA0",color:"white"},on:{click:e.showShareDialog}},[e._v(" "+e._s(e.lang.tips23)+" ")])],1)])]),t("div",{staticClass:"list_item"},[0===e.list.length?t("div",{staticClass:"nodata"},[t("el-empty",{attrs:{description:e.lang.nodata}})],1):e._e(),e._l(e.filteredList,(function(i){return t("div",{key:i.id,staticClass:"box"},[t("div",{staticClass:"main",on:{click:function(t){e.selectedImage=i}}},[t("div",{directives:[{name:"loading",rawName:"v-loading",value:i.loading,expression:"item.loading"}],staticClass:"cover",attrs:{"element-loading-text":e.lang.loading+"..."}},[t("img",{staticClass:"project_cover",attrs:{src:"https://www.simplerevise.com/img/project/testimg/thumbnail/"+i.img_url+".jpg",alt:""}})])]),t("div",{staticClass:"title"},[t("div",{staticClass:"action"},[t("i",{staticClass:"el-icon-delete",on:{click:function(t){return e.del(i.img_url)}}})]),t("p",[e._v(e._s(i.group_name))]),t("p",[e._v(e._s("null"!==i.tag_name?i.tag_name:"Untagged")+" Â· "+e._s(i.create_time))])])])}))],2),t("el-dialog",{staticStyle:{width:"800px","margin-left":"300px"},attrs:{title:e.lang.tips27,visible:e.showAlertBox},on:{"update:visible":function(t){e.showAlertBox=t},close:function(t){e.selectedImage=null}}},[t("el-select",{attrs:{placeholder:"Select a tag"},model:{value:e.selectedTagDialog,callback:function(t){e.selectedTagDialog=t},expression:"selectedTagDialog"}},[t("el-option",{attrs:{value:"null",label:"All"}}),e._l(e.tags,(function(e){return t("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})}))],2),e._v(" Â Â  "),t("el-button",{attrs:{type:"primary"},on:{click:e.saveTag}},[e._v(e._s(e.lang.tips26))])],1),t("el-dialog",{attrs:{title:e.lang.tips23,visible:e.showLinkPrompt,"show-close":!1,width:"400px"},on:{"update:visible":function(t){e.showLinkPrompt=t}}},[t("div",{staticStyle:{"margin-top":"-20px",display:"flex","align-items":"center"}},[t("el-input",{ref:"linkInput",attrs:{value:e.generateLink,readonly:""}}),t("el-button",{staticStyle:{"margin-left":"10px",background:"#345CA0",color:"white"},attrs:{type:"primary"},on:{click:e.copyLink}},[e._v(" "+e._s(e.lang.tips30)+" ")])],1)])],1)},l=[],a=i(3675);i(4453);const n={data(){return{user:{},list:[],selectedOrganisation:"",selectedDesignType:"",selectedPreference:"",selectedTag:"",selectedImage:null,originalList:[],creater_id:null,selectedTagDialog:"",showLinkPrompt:!1,organisations:[{id:1,name:"Org 1"},{id:2,name:"Org 2"},{id:3,name:"Org 3"}],designTypes:[{id:1,name:"Design 1"},{id:2,name:"Design 2"},{id:3,name:"Design 3"}],preferences:[{id:1,name:"Preference 1"},{id:2,name:"Preference 2"},{id:3,name:"Preference 3"}],tags:[],loading:!1}},watch:{selectedTag:{handler(){this.filteredList()},immediate:!0}},created(){this.lang=this.$lang("board"),this.user=JSON.parse(localStorage.getItem("designer_user")),this.getList()},computed:{generateLink(){return`${window.location.origin}/#/share?id=${this.user.id}`},filteredList(){return""===this.selectedTag||"All"===this.selectedTag?(this.$nextTick((()=>{let e=document.querySelectorAll(".project_cover");e.forEach(((e,t)=>{let i=new Image;i.onload=()=>{this.list[t].loading=!1,i.width>i.height?e.classList.add("row"):e.classList.add("col")},i.src=e.src})),this.loading=!1})),this.originalList):(this.$nextTick((()=>{let e=document.querySelectorAll(".project_cover");e.forEach(((e,t)=>{let i=new Image;i.onload=()=>{this.list[t].loading=!1,i.width>i.height?e.classList.add("row"):e.classList.add("col")},i.src=e.src})),this.loading=!1})),this.originalList.filter((e=>e.tag_name===this.selectedTag)))},showAlertBox(){return null!==this.selectedImage}},methods:{goProject(e){this.selectedImage=e},showShareDialog(){this.creater_id=this.user.id,this.showLinkPrompt=!0},copyLink(){},share(){const e=this.selectedImage;this.creater_id=null,this.$ajax.post("/project/share_link",{img_url:e.img_url}).then((e=>{const t=`${window.location.origin}/#/share?id=${e.id}`;this.generatedLink=t,this.creater_id=e.creater_id,this.showLinkPrompt=!0})).catch((e=>{console.error(e)}))},saveTag(){const e=this.selectedTagDialog,t=this.selectedImage.img_url,i=this.user.id;this.$ajax.post("/group/save_own_img_tag",{name:e,img_url:t,creater_id:i}).then((e=>{this.selectedImage=null,this.getList()})).catch((e=>{console.error(e)}))},getList(){this.$ajax.get("/project/list_library/?id="+this.user.id).then((e=>{this.list=e.map((e=>(e.create_time=a.Z.time("y-m-d",1e3*e.create_time),e.loading=!0,e))),this.originalList=[...this.list],this.$ajax.get("/project/list_tags").then((e=>{this.tags=e})),this.$nextTick((()=>{let e=document.querySelectorAll(".project_cover");e.forEach(((e,t)=>{let i=new Image;i.onload=()=>{this.list[t].loading=!1,i.width>i.height?e.classList.add("row"):e.classList.add("col")},i.src=e.src})),this.loading=!1}))}))},del(e){let t=this;this.$confirm(t.lang.tips7,t.lang.tips6,{type:"warning",closeOnPressEscape:!1,closeOnClickModal:!1,cancelButtonText:t.lang.tips3,confirmButtonText:t.lang.tips4,beforeClose(i,s,l){if("confirm"==i){if(t.httping)return;t.httping=!0;let i=0;t.list.some(((t,s)=>{if(t.img_url==e)return i=s,!0})),t.$ajax.get("/group/del_own_gallery_img/?img_url="+e+"&id="+t.user.id).then((e=>{t.list.splice(i,1),t.$message.success("success"),l(),t.getList()}))}else l()}}).catch((()=>{}))},handleUpload(e){},copyLink(){const e=this.$refs.linkInput.$refs.input;e.select(),document.execCommand("copy"),this.$message.success("Link copied to clipboard")},save(){},goBack(){this.$router.go(-1)},getDesignPreferenceLink(){return{name:"upload",query:this.$route.query}},goViewUserPreference(){return{name:"your_preference",query:{id:this.user.id}}},goChooseFromPublic(){return{name:"choose_from_public"}},goViewTagList(){return{name:"tag_list",query:this.$route.query}}}},r=n;var o=i(3736),c=(0,o.Z)(r,s,l,!1,null,"212f2d07",null);const g=c.exports},3675:(e,t,i)=>{i.d(t,{Z:()=>l});const s={to2:e=>Number(e)<10?`0${e}`:String(e),time(e="y-m-d",t=null){let i=t?new Date(t):new Date;return e=e.replace("y",i.getFullYear()),e=e.replace("m",this.to2(i.getMonth()+1)),e=e.replace("d",this.to2(i.getDate())),e=e.replace("h",this.to2(i.getHours())),e=e.replace("i",this.to2(i.getMinutes())),e=e.replace("s",this.to2(i.getSeconds())),e=e.replace("w",i.getDay()),e},monthLength(e=null){let t=1*this.time("y",e),i=this.to2(1*this.time("m",e)+1),s=new Date(`${t}-${i}-01`).getTime()-864e5;return Number(this.time("d",s))},preMonthLenggth(e=null){let t=1*this.time("y",e),i=this.to2(1*this.time("m",e)),s=new Date(`${t}-${i}-01`).getTime()-864e5;return Number(this.time("d",s))},nextMonthLenggth(e=null){let t=1*this.time("y",e),i=this.to2(1*this.time("m",e)+2),s=new Date(`${t}-${i}-01`).getTime()-864e5;return Number(this.time("d",s))},monthFirst(e=null){let t=this.time("y-m",e)+"-01";return this.time("y-m-d",t)},monthLast(e=null){let t=1*this.time("y",e),i=this.to2(1*this.time("m",e)+1),s=new Date(`${t}-${i}-01`).getTime()-864e5;return this.time("y-m-d",s)},preMonthToday(e=null){let t=this.time("y",e),i=this.to2(1*this.time("m",e)-1),s=this.time("d",e);return this.time("y-m-d",`${t}-${i}-${s}`)},nextMonthToday(e=null){let t=this.time("y",e),i=this.to2(1*this.time("m",e)+1),s=this.time("d",e);return this.time("y-m-d",`${t}-${i}-${s}`)},timeout(e){},timeRemaining(e,t){return e-=parseInt((new Date).getTime()/1e3),this.unixToString(t,e)},unixToString(e,t){let i=parseInt(t/60/60/24),l=parseInt((t-86400*i)/3600),a=parseInt((t-86400*i-3600*l)/60),n=t-86400*i-3600*l-60*a;return e=e.replace("d",s.to2(s.low(i))),e=e.replace("h",s.to2(s.low(l))),e=e.replace("i",s.to2(s.low(a))),e=e.replace("s",s.to2(s.low(n))),e},low(e){return e<0?0:e},parse(e){return new Date(e)}},l=s}}]);
//# sourceMappingURL=684.a9ba7b8b.js.map