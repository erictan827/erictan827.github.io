{"version":3,"file":"js/16.2ecb742c.js","mappings":"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","sources":["webpack://designer/./src/views/project.vue?b56f","webpack://designer/src/views/project.vue","webpack://designer/./src/views/project.vue?b05d","webpack://designer/./src/views/project.vue","webpack://designer/./src/tools/timer.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"project\"},[_c('div',{staticClass:\"project_head\"},[_c('div',{staticClass:\"back\"},[_c('span',{on:{\"click\":function($event){return _vm.$router.go(-1)}}},[_c('i',{staticClass:\"el-icon-arrow-left\"}),_vm._v(\" \"+_vm._s(_vm.lang.back)+\" \")])]),_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.info.title))]),_c('div',{staticClass:\"share\",on:{\"click\":_vm.share}},[_c('i',{staticClass:\"el-icon-share\"})])]),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"project_main\",attrs:{\"element-loading-text\":_vm.lang.loading + '...',\"element-loading-spinner\":\"el-icon-loading\"}},[_c('div',{staticClass:\"canvas\"},[_c('ul',{staticClass:\"canvas_toolbar\"},[_c('li',{class:{active_tool : _vm.currentTool=='paint-brush'},on:{\"click\":function($event){_vm.currentTool='paint-brush'}}},[_c('svg',{attrs:{\"width\":\"40\",\"height\":\"40\",\"viewBox\":\"0 0 40 40\",\"fill\":\"none\",\"xmlns\":\"http://www.w3.org/2000/svg\"}},[_c('path',{attrs:{\"d\":\"M23.4381 13.5612L26.2627 16.3936M10.9856 29.0081C11.1115 28.1265 11.1817 27.2094 11.4759 26.3642C11.6453 25.8774 11.8768 25.4144 12.1647 24.9867C12.489 24.5047 12.9088 24.0849 13.7483 23.2454L25.4097 11.5897C26.1907 10.8086 27.457 10.8086 28.2381 11.5897C29.0191 12.3707 29.0191 13.6371 28.2381 14.4181L16.3972 26.2533C15.6859 26.9647 15.3302 27.3204 14.9273 27.6084C14.5697 27.8641 14.185 28.0797 13.7803 28.2514C12.8964 28.6262 11.9169 28.7838 10.9856 29.0081Z\",\"stroke\":\"black\",\"stroke-width\":\"1.5\",\"stroke-linejoin\":\"round\"}})])]),_c('li',{staticClass:\"brush_color\"},[_c('el-color-picker',{attrs:{\"size\":\"mini\"},model:{value:(_vm.brushColor),callback:function ($$v) {_vm.brushColor=$$v},expression:\"brushColor\"}})],1),_c('li',{class:{inactive_tool : _vm.currentHistory<=0},on:{\"click\":function($event){return _vm.navCanvas(-1)}}},[_c('svg',{attrs:{\"width\":\"40\",\"height\":\"40\",\"viewBox\":\"0 0 40 40\",\"fill\":\"none\",\"xmlns\":\"http://www.w3.org/2000/svg\"}},[_c('path',{attrs:{\"d\":\"M28 25V23.8C28 22.1198 28 21.2798 27.673 20.638C27.3854 20.0735 26.9265 19.6146 26.362 19.327C25.7202 19 24.8802 19 23.2 19H12M12 19L16 15M12 19L16 23\",\"stroke\":\"black\",\"stroke-width\":\"1.5\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}})])]),_c('li',{class:{inactive_tool : _vm.currentHistory>=_vm.canvasHistorys.length - 1},on:{\"click\":function($event){return _vm.navCanvas(1)}}},[_c('svg',{attrs:{\"width\":\"40\",\"height\":\"40\",\"viewBox\":\"0 0 40 40\",\"fill\":\"none\",\"xmlns\":\"http://www.w3.org/2000/svg\"}},[_c('path',{attrs:{\"d\":\"M12 25V23.8C12 22.1198 12 21.2798 12.327 20.638C12.6146 20.0735 13.0735 19.6146 13.638 19.327C14.2798 19 15.1198 19 16.8 19H28M28 19L24 15M28 19L24 23\",\"stroke\":\"black\",\"stroke-width\":\"1.5\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}})])]),_c('li',{class:{inactive_tool : _vm.currentHistory<=0},on:{\"click\":_vm.saveCanvas}},[_c('svg',{attrs:{\"width\":\"83\",\"height\":\"40\",\"viewBox\":\"0 0 83 40\",\"fill\":\"none\",\"xmlns\":\"http://www.w3.org/2000/svg\"}},[_c('path',{attrs:{\"d\":\"M27 29H13C12.4696 29 11.9609 28.7893 11.5858 28.4142C11.2107 28.0391 11 27.5304 11 27V13C11 12.4696 11.2107 11.9609 11.5858 11.5858C11.9609 11.2107 12.4696 11 13 11H24L29 16V27C29 27.5304 28.7893 28.0391 28.4142 28.4142C28.0391 28.7893 27.5304 29 27 29Z\",\"stroke\":\"black\",\"stroke-width\":\"1.5\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}}),_c('path',{attrs:{\"d\":\"M25 29V21H15V29\",\"stroke\":\"black\",\"stroke-width\":\"1.5\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}}),_c('path',{attrs:{\"d\":\"M44.6719 17.4929C44.6188 17.0223 44.4001 16.6577 44.0156 16.3991C43.6312 16.1373 43.1473 16.0064 42.5639 16.0064C42.1463 16.0064 41.785 16.0727 41.4801 16.2053C41.1752 16.3345 40.9382 16.5135 40.7692 16.7422C40.6035 16.9676 40.5206 17.2244 40.5206 17.5128C40.5206 17.7547 40.5769 17.9635 40.6896 18.1392C40.8056 18.3149 40.9564 18.4624 41.142 18.5817C41.331 18.6977 41.5331 18.7955 41.7486 18.875C41.964 18.9512 42.1712 19.0142 42.37 19.0639L43.3643 19.3224C43.6892 19.402 44.0223 19.5097 44.3636 19.6456C44.705 19.7815 45.0215 19.9605 45.3132 20.1825C45.6049 20.4046 45.8402 20.6797 46.0192 21.0078C46.2015 21.3359 46.2926 21.7287 46.2926 22.1861C46.2926 22.7628 46.1435 23.2749 45.8452 23.7223C45.5502 24.1697 45.121 24.5227 44.5575 24.7812C43.9974 25.0398 43.3196 25.169 42.5241 25.169C41.7618 25.169 41.1023 25.0481 40.5455 24.8061C39.9886 24.5642 39.5528 24.2211 39.2379 23.777C38.9231 23.3295 38.7491 22.7992 38.7159 22.1861H40.2571C40.2869 22.554 40.4063 22.8606 40.6151 23.1058C40.8272 23.3478 41.0973 23.5284 41.4254 23.6477C41.7569 23.7637 42.1198 23.8217 42.5142 23.8217C42.9484 23.8217 43.3345 23.7538 43.6726 23.6179C44.014 23.4787 44.2824 23.2865 44.478 23.0412C44.6735 22.7926 44.7713 22.5026 44.7713 22.1712C44.7713 21.8696 44.6851 21.6226 44.5128 21.4304C44.3438 21.2382 44.1134 21.0791 43.8217 20.9531C43.5334 20.8272 43.2069 20.7161 42.8423 20.62L41.6392 20.2919C40.8239 20.0698 40.1776 19.7434 39.7003 19.3125C39.2263 18.8816 38.9893 18.3116 38.9893 17.6023C38.9893 17.0156 39.1484 16.5036 39.4666 16.0661C39.7848 15.6286 40.2157 15.2888 40.7592 15.0469C41.3028 14.8016 41.916 14.679 42.5987 14.679C43.2881 14.679 43.8963 14.8 44.4233 15.0419C44.9536 15.2839 45.3712 15.617 45.6761 16.0412C45.9811 16.4621 46.1402 16.946 46.1534 17.4929H44.6719ZM50.2314 25.169C49.7475 25.169 49.31 25.0795 48.9189 24.9006C48.5278 24.7183 48.2179 24.4548 47.9892 24.1101C47.7638 23.7654 47.6511 23.3428 47.6511 22.8423C47.6511 22.4115 47.734 22.0568 47.8997 21.7784C48.0654 21.5 48.2891 21.2796 48.5708 21.1172C48.8526 20.9548 49.1674 20.8321 49.5154 20.7493C49.8635 20.6664 50.2181 20.6035 50.5794 20.5604C51.0368 20.5073 51.408 20.4643 51.693 20.4311C51.978 20.3946 52.1852 20.3366 52.3145 20.2571C52.4437 20.1776 52.5083 20.0483 52.5083 19.8693V19.8345C52.5083 19.4003 52.3857 19.0639 52.1404 18.8253C51.8985 18.5866 51.5372 18.4673 51.0566 18.4673C50.5562 18.4673 50.1618 18.5784 49.8734 18.8004C49.5884 19.0192 49.3912 19.2628 49.2818 19.5312L47.8848 19.2131C48.0505 18.7491 48.2924 18.3745 48.6106 18.0895C48.9321 17.8011 49.3017 17.5923 49.7193 17.4631C50.1369 17.3305 50.5761 17.2642 51.0368 17.2642C51.3417 17.2642 51.6648 17.3007 52.0062 17.3736C52.3509 17.4432 52.6724 17.5724 52.9707 17.7614C53.2723 17.9503 53.5192 18.2204 53.7115 18.5717C53.9037 18.9197 53.9998 19.3722 53.9998 19.929V25H52.5481V23.956H52.4885C52.3923 24.1482 52.2482 24.3371 52.0559 24.5227C51.8637 24.7083 51.6168 24.8625 51.3152 24.9851C51.0136 25.1077 50.6523 25.169 50.2314 25.169ZM50.5545 23.9759C50.9655 23.9759 51.3168 23.8946 51.6085 23.7322C51.9035 23.5698 52.1272 23.3577 52.2797 23.0959C52.4354 22.8307 52.5133 22.5473 52.5133 22.2457V21.2614C52.4603 21.3144 52.3575 21.3641 52.2051 21.4105C52.0559 21.4536 51.8852 21.4917 51.693 21.5249C51.5008 21.5547 51.3135 21.5829 51.1312 21.6094C50.9489 21.6326 50.7965 21.6525 50.6738 21.669C50.3855 21.7055 50.122 21.7668 49.8833 21.853C49.648 21.9392 49.4591 22.0634 49.3166 22.2259C49.1774 22.3849 49.1078 22.5971 49.1078 22.8622C49.1078 23.2301 49.2437 23.5085 49.5154 23.6974C49.7872 23.883 50.1336 23.9759 50.5545 23.9759ZM62.239 17.3636L59.4698 25H57.8789L55.1048 17.3636H56.7006L58.6346 23.2401H58.7141L60.6431 17.3636H62.239ZM66.6674 25.1541C65.9151 25.1541 65.2671 24.9934 64.7235 24.6719C64.1833 24.3471 63.7657 23.8913 63.4707 23.3047C63.179 22.7147 63.0332 22.0237 63.0332 21.2315C63.0332 20.4493 63.179 19.7599 63.4707 19.1634C63.7657 18.5668 64.1767 18.1011 64.7037 17.7663C65.234 17.4316 65.8538 17.2642 66.563 17.2642C66.9939 17.2642 67.4115 17.3355 67.8159 17.478C68.2202 17.6205 68.5832 17.8442 68.9047 18.1491C69.2261 18.4541 69.4797 18.8501 69.6653 19.3374C69.8509 19.8213 69.9437 20.4096 69.9437 21.1023V21.6293H63.8734V20.5156H68.487C68.487 20.1245 68.4075 19.7782 68.2484 19.4766C68.0893 19.1716 67.8656 18.9313 67.5772 18.7557C67.2922 18.58 66.9574 18.4922 66.573 18.4922C66.1554 18.4922 65.7908 18.5949 65.4792 18.8004C65.171 19.0026 64.9324 19.2678 64.7633 19.5959C64.5976 19.9207 64.5147 20.2737 64.5147 20.6548V21.5249C64.5147 22.0353 64.6042 22.4695 64.7832 22.8274C64.9655 23.1854 65.219 23.4588 65.5439 23.6477C65.8687 23.8333 66.2482 23.9261 66.6824 23.9261C66.9641 23.9261 67.2209 23.8864 67.4529 23.8068C67.685 23.724 67.8855 23.6013 68.0545 23.4389C68.2235 23.2765 68.3528 23.076 68.4423 22.8374L69.8493 23.0909C69.7366 23.5052 69.5344 23.8681 69.2427 24.1797C68.9544 24.4879 68.5914 24.7282 68.1539 24.9006C67.7198 25.0696 67.2243 25.1541 66.6674 25.1541Z\",\"fill\":\"black\"}})])])]),_c('ul',{staticClass:\"canvas_navbar\"},[_c('li',{class:{active_tool : _vm.currentTool=='mark'},on:{\"click\":function($event){_vm.currentTool='mark'}}},[_c('svg',{attrs:{\"width\":\"40\",\"height\":\"40\",\"viewBox\":\"0 0 40 40\",\"fill\":\"none\",\"xmlns\":\"http://www.w3.org/2000/svg\"}},[_c('path',{attrs:{\"d\":\"M15.7455 29.0171L15.6538 28.4241L15.7455 29.0171ZM15.9225 29.0432L15.6657 29.5855L15.9225 29.0432ZM9.87038 29.3984L9.40186 29.0236L9.87038 29.3984ZM10.1505 29.8823L10.0588 29.2893L10.1505 29.8823ZM12.2414 26.0603L12.7185 25.6964L12.2414 26.0603ZM12.2394 26.4372L12.7079 26.812L12.2394 26.4372ZM29.5965 20C29.5965 25.1915 25.388 29.4 20.1965 29.4V30.6C26.0507 30.6 30.7965 25.8542 30.7965 20H29.5965ZM20.1965 10.6C25.388 10.6 29.5965 14.8085 29.5965 20H30.7965C30.7965 14.1458 26.0507 9.4 20.1965 9.4V10.6ZM10.7965 20C10.7965 14.8085 15.005 10.6 20.1965 10.6V9.4C14.3423 9.4 9.59649 14.1458 9.59649 20H10.7965ZM12.7185 25.6964C11.5125 24.1158 10.7965 22.1423 10.7965 20H9.59649C9.59649 22.4144 10.4044 24.6419 11.7644 26.4243L12.7185 25.6964ZM10.3389 29.7732L12.7079 26.812L11.7708 26.0623L9.40186 29.0236L10.3389 29.7732ZM15.6538 28.4241L10.0588 29.2893L10.2422 30.4752L15.8372 29.61L15.6538 28.4241ZM20.1965 29.4C18.758 29.4 17.3966 29.0773 16.1792 28.5009L15.6657 29.5855C17.0402 30.2363 18.5767 30.6 20.1965 30.6V29.4ZM15.8372 29.61C15.776 29.6195 15.7164 29.6095 15.6657 29.5855L16.1792 28.5009C16.0183 28.4247 15.8355 28.396 15.6538 28.4241L15.8372 29.61ZM9.40186 29.0236C8.88929 29.6643 9.43131 30.6006 10.2422 30.4752L10.0588 29.2893C10.3291 29.2475 10.5098 29.5596 10.3389 29.7732L9.40186 29.0236ZM11.7644 26.4243C11.6877 26.3238 11.6811 26.1745 11.7708 26.0623L12.7079 26.812C12.973 26.4806 12.9655 26.0202 12.7185 25.6964L11.7644 26.4243Z\",\"fill\":\"black\"}})])])]),_c('div',{staticClass:\"canvas_body\"},[_c('div',{staticClass:\"canvas_img\"}),_c('canvas',{attrs:{\"id\":\"canvasImg\"}}),_c('canvas',{attrs:{\"id\":\"canvasDrawing\"},on:{\"mousedown\":_vm.onCanvasMouseDown,\"mouseup\":_vm.onCanvasMouseUp}}),_c('div',{attrs:{\"id\":\"canvasMarks\"}},_vm._l((_vm.marks),function(item,index){return _c('span',{key:index,class:{mark_non_canvas : !(item.pos_x > 0)},style:({left: item.pos.x + 'px', top: item.pos.y + 'px', position: 'absolute'})},[_c('svg',{attrs:{\"width\":\"25\",\"height\":\"25\",\"viewBox\":\"0 0 25 25\",\"fill\":\"none\",\"xmlns\":\"http://www.w3.org/2000/svg\"}},[_c('path',{attrs:{\"d\":\"M0 12.5C0 5.59644 5.59644 0 12.5 0V0C19.4036 0 25 5.59644 25 12.5V12.5C25 19.4036 19.4036 25 12.5 25H0V12.5Z\",\"fill\":\"#F84D46\"}})]),_c('label',[_vm._v(_vm._s(item.num))])])}),0)])]),(_vm.marks.length > 0)?_c('div',{staticClass:\"marks\"},_vm._l((_vm.marks),function(item,index){return _c('div',{key:item.id,staticClass:\"mark_item\"},[_c('div',{staticClass:\"mark_item_num\"},[_vm._v(\" # \"+_vm._s(item.num)+\" \"),_c('span',{class:{mark_canvas : item.pos_x > 0}})]),_c('div',{staticClass:\"mark_item_user\"},[_vm._v(_vm._s(item.user_name))]),_c('div',{staticClass:\"mark_item_time\"},[_c('span',[_vm._v(_vm._s(item.create_time))])]),_c('div',{staticClass:\"mark_item_main\"},[_c('pre',{staticClass:\"mark_item_title\"},[_vm._v(_vm._s(item.content))])]),(_vm.user.id >= 0)?_c('div',{staticClass:\"mark_item_menu\"},[_c('i',{staticClass:\"el-icon-edit-outline\",on:{\"click\":function($event){return _vm.openEditDialog(item.id, index)}}}),_c('i',{staticClass:\"el-icon-microphone\",class:{has_content : item.playback !== null},on:{\"click\":function($event){return _vm.openEditDialog(item.id, index)}}}),_c('i',{staticClass:\"el-icon-delete\",on:{\"click\":function($event){return _vm.del(item.id, index)}}})]):_vm._e()])}),0):_vm._e(),(_vm.marks.length == 0)?_c('div',{staticClass:\"marks nodata\"},[_vm._v(\" \"+_vm._s(_vm.lang.nodata)+\" \")]):_vm._e(),_c('div',{staticClass:\"form\"},[(this.user.id != 0)?[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":\"8\",\"placeholder\":_vm.lang.inp},model:{value:(_vm.form),callback:function ($$v) {_vm.form=$$v},expression:\"form\"}}),_c('el-button',{staticStyle:{\"margin-top\":\"0px\",\"width\":\"100%\",\"background-color\":\"#345CA0\",\"padding\":\"15px 0px\",\"border-color\":\"#345CA0\",\"border-radius\":\"0px\"},attrs:{\"loading\":_vm.forming,\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":_vm.submitForm}},[_vm._v(_vm._s(_vm.lang.inpSub))])]:_vm._e()],2)]),_c('el-dialog',{staticClass:\"edit-dialog\",attrs:{\"title\":_vm.lang2.edit,\"visible\":_vm.editForm.show,\"width\":\"40%\",\"before-close\":() => {},\"show-close\":false},on:{\"update:visible\":function($event){return _vm.$set(_vm.editForm, \"show\", $event)}}},[_c('div',[_vm._v(\"記點 : \"),_c('span',[_vm._v(_vm._s(_vm.editForm.num))])]),_c('el-input',{staticStyle:{\"margin-top\":\"20px\"},attrs:{\"type\":\"textarea\",\"autosize\":{minRows:3,maxRows:6},\"placeholder\":_vm.lang2.addContent},model:{value:(_vm.editForm.content),callback:function ($$v) {_vm.$set(_vm.editForm, \"content\", $$v)},expression:\"editForm.content\"}}),_c('div',{staticStyle:{\"margin-top\":\"20px\"}},[_c('el-row',[_c('el-col',{attrs:{\"span\":4}},[_c('i',{staticClass:\"el-icon-microphone\",class:{record_recording : _vm.isRecording},on:{\"click\":_vm.onRecorderClick}}),_c('span',{staticClass:\"record_conutdown\",class:{record_recording : _vm.isRecording}},[_vm._v(_vm._s(_vm.recorderCountDown))])]),_c('el-col',{attrs:{\"span\":20}},[_c('audio',{staticClass:\"record_playback\",attrs:{\"src\":_vm.editForm.playback,\"controls\":\"\"}})])],1)],1),_c('span',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"size\":\"small\",\"disabled\":_vm.isRecording},on:{\"click\":_vm.closeEditDialog}},[_vm._v(_vm._s(_vm.lang2.tips19))]),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"disabled\":_vm.isRecording},on:{\"click\":_vm.updateMark}},[_vm._v(_vm._s(_vm.lang2.tips20))])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"project\">\r\n        <div class=\"project_head\">\r\n            <div class=\"back\">\r\n                <span @click=\"$router.go(-1)\">\r\n                    <i class=\"el-icon-arrow-left\"></i> {{lang.back}}\r\n                </span>\r\n            </div>\r\n            <div class=\"title\">{{info.title}}</div>\r\n            <div class=\"share\" @click=\"share\">\r\n                <i class=\"el-icon-share\"></i>\r\n            </div>\r\n        </div>\r\n        <div class=\"project_main\" v-loading=\"loading\" :element-loading-text=\"lang.loading + '...'\" element-loading-spinner=\"el-icon-loading\">\r\n\r\n\r\n            <div class=\"canvas\">\r\n                <ul class=\"canvas_toolbar\">\r\n                    <li @click=\"currentTool='paint-brush'\" :class=\"{active_tool : currentTool=='paint-brush'}\">\r\n                        <!--    <i class=\"el-icon-edit\"></i>    //-->\r\n                        <svg width=\"40\" height=\"40\" viewBox=\"0 0 40 40\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                            <path d=\"M23.4381 13.5612L26.2627 16.3936M10.9856 29.0081C11.1115 28.1265 11.1817 27.2094 11.4759 26.3642C11.6453 25.8774 11.8768 25.4144 12.1647 24.9867C12.489 24.5047 12.9088 24.0849 13.7483 23.2454L25.4097 11.5897C26.1907 10.8086 27.457 10.8086 28.2381 11.5897C29.0191 12.3707 29.0191 13.6371 28.2381 14.4181L16.3972 26.2533C15.6859 26.9647 15.3302 27.3204 14.9273 27.6084C14.5697 27.8641 14.185 28.0797 13.7803 28.2514C12.8964 28.6262 11.9169 28.7838 10.9856 29.0081Z\" stroke=\"black\" stroke-width=\"1.5\" stroke-linejoin=\"round\"/>\r\n                        </svg>\r\n\r\n                    </li>\r\n                    <li class=\"brush_color\">\r\n                        <el-color-picker v-model=\"brushColor\" size=\"mini\"></el-color-picker>\r\n                    </li>\r\n                    <!--\r\n                    <li @click=\"currentTool='eraser'\" :class=\"{active_tool : currentTool=='eraser'}\">\r\n                        <i class=\"el-icon-scissors\"></i>\r\n                        <svg width=\"22\" height=\"20\" viewBox=\"0 0 22 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                            <path d=\"M3.71166 19.1419C4.27648 19.6913 5.04276 20 5.84157 20H8.70271C9.50152 20 10.2678 19.6913 10.8329 19.1419L21.1177 9.14198C21.6825 8.59256 22 7.84775 22 7.07081C22 6.29413 21.6825 5.54908 21.1177 4.99991L16.8576 0.857837C16.2926 0.308421 15.5265 0 14.7275 0C13.9287 0 13.1624 0.308421 12.5976 0.857837L0.882277 12.2486V12.2483C0.31746 12.7978 0 13.5428 0 14.3195C0 15.0962 0.31746 15.8412 0.882277 16.3907L3.71166 19.1419ZM13.6621 1.89354C13.9448 1.61871 14.3278 1.4645 14.7272 1.4645C15.1267 1.4645 15.5099 1.61871 15.7923 1.89354L20.0524 6.03561C20.335 6.3102 20.4936 6.68263 20.4936 7.07119C20.4936 7.45953 20.335 7.83193 20.0524 8.10652L14.7272 13.2842L8.33722 7.07119L13.6621 1.89354ZM1.94685 13.2843L7.27201 8.10665L13.6623 14.3199L9.76754 18.1067C9.48563 18.3823 9.10208 18.5367 8.70245 18.5355H5.84131C5.44165 18.5367 5.05812 18.3823 4.77648 18.1067L1.94685 15.3555C1.66494 15.0806 1.50634 14.7082 1.50634 14.3199C1.50634 13.9315 1.66494 13.5591 1.94685 13.2843Z\" fill=\"black\"/>\r\n                        </svg>\r\n\r\n                    </li>\r\n                    <li @click=\"currentTool='square'\" :class=\"{active_tool : currentTool=='square'}\">\r\n                        <i class=\"el-icon-news\"></i>\r\n                    </li>\r\n                    //-->\r\n                    <li @click=\"navCanvas(-1)\" :class=\"{inactive_tool : currentHistory<=0}\">\r\n                        <!--    <i class=\"el-icon-arrow-left\"></i>  //-->\r\n                        <svg width=\"40\" height=\"40\" viewBox=\"0 0 40 40\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                            <path d=\"M28 25V23.8C28 22.1198 28 21.2798 27.673 20.638C27.3854 20.0735 26.9265 19.6146 26.362 19.327C25.7202 19 24.8802 19 23.2 19H12M12 19L16 15M12 19L16 23\" stroke=\"black\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n                        </svg>\r\n                    </li>\r\n                    <li @click=\"navCanvas(1)\" :class=\"{inactive_tool : currentHistory>=canvasHistorys.length - 1}\">\r\n                        <!--    <i class=\"el-icon-arrow-right\"></i> //-->\r\n                        <svg width=\"40\" height=\"40\" viewBox=\"0 0 40 40\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                            <path d=\"M12 25V23.8C12 22.1198 12 21.2798 12.327 20.638C12.6146 20.0735 13.0735 19.6146 13.638 19.327C14.2798 19 15.1198 19 16.8 19H28M28 19L24 15M28 19L24 23\" stroke=\"black\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n                        </svg>\r\n                    </li>\r\n                    <li @click=\"saveCanvas\" :class=\"{inactive_tool : currentHistory<=0}\">\r\n                        <!--    <i class=\"el-icon-folder-add\"></i>  //-->\r\n                        <svg width=\"83\" height=\"40\" viewBox=\"0 0 83 40\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                            <path d=\"M27 29H13C12.4696 29 11.9609 28.7893 11.5858 28.4142C11.2107 28.0391 11 27.5304 11 27V13C11 12.4696 11.2107 11.9609 11.5858 11.5858C11.9609 11.2107 12.4696 11 13 11H24L29 16V27C29 27.5304 28.7893 28.0391 28.4142 28.4142C28.0391 28.7893 27.5304 29 27 29Z\" stroke=\"black\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n                            <path d=\"M25 29V21H15V29\" stroke=\"black\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n                            <path d=\"M44.6719 17.4929C44.6188 17.0223 44.4001 16.6577 44.0156 16.3991C43.6312 16.1373 43.1473 16.0064 42.5639 16.0064C42.1463 16.0064 41.785 16.0727 41.4801 16.2053C41.1752 16.3345 40.9382 16.5135 40.7692 16.7422C40.6035 16.9676 40.5206 17.2244 40.5206 17.5128C40.5206 17.7547 40.5769 17.9635 40.6896 18.1392C40.8056 18.3149 40.9564 18.4624 41.142 18.5817C41.331 18.6977 41.5331 18.7955 41.7486 18.875C41.964 18.9512 42.1712 19.0142 42.37 19.0639L43.3643 19.3224C43.6892 19.402 44.0223 19.5097 44.3636 19.6456C44.705 19.7815 45.0215 19.9605 45.3132 20.1825C45.6049 20.4046 45.8402 20.6797 46.0192 21.0078C46.2015 21.3359 46.2926 21.7287 46.2926 22.1861C46.2926 22.7628 46.1435 23.2749 45.8452 23.7223C45.5502 24.1697 45.121 24.5227 44.5575 24.7812C43.9974 25.0398 43.3196 25.169 42.5241 25.169C41.7618 25.169 41.1023 25.0481 40.5455 24.8061C39.9886 24.5642 39.5528 24.2211 39.2379 23.777C38.9231 23.3295 38.7491 22.7992 38.7159 22.1861H40.2571C40.2869 22.554 40.4063 22.8606 40.6151 23.1058C40.8272 23.3478 41.0973 23.5284 41.4254 23.6477C41.7569 23.7637 42.1198 23.8217 42.5142 23.8217C42.9484 23.8217 43.3345 23.7538 43.6726 23.6179C44.014 23.4787 44.2824 23.2865 44.478 23.0412C44.6735 22.7926 44.7713 22.5026 44.7713 22.1712C44.7713 21.8696 44.6851 21.6226 44.5128 21.4304C44.3438 21.2382 44.1134 21.0791 43.8217 20.9531C43.5334 20.8272 43.2069 20.7161 42.8423 20.62L41.6392 20.2919C40.8239 20.0698 40.1776 19.7434 39.7003 19.3125C39.2263 18.8816 38.9893 18.3116 38.9893 17.6023C38.9893 17.0156 39.1484 16.5036 39.4666 16.0661C39.7848 15.6286 40.2157 15.2888 40.7592 15.0469C41.3028 14.8016 41.916 14.679 42.5987 14.679C43.2881 14.679 43.8963 14.8 44.4233 15.0419C44.9536 15.2839 45.3712 15.617 45.6761 16.0412C45.9811 16.4621 46.1402 16.946 46.1534 17.4929H44.6719ZM50.2314 25.169C49.7475 25.169 49.31 25.0795 48.9189 24.9006C48.5278 24.7183 48.2179 24.4548 47.9892 24.1101C47.7638 23.7654 47.6511 23.3428 47.6511 22.8423C47.6511 22.4115 47.734 22.0568 47.8997 21.7784C48.0654 21.5 48.2891 21.2796 48.5708 21.1172C48.8526 20.9548 49.1674 20.8321 49.5154 20.7493C49.8635 20.6664 50.2181 20.6035 50.5794 20.5604C51.0368 20.5073 51.408 20.4643 51.693 20.4311C51.978 20.3946 52.1852 20.3366 52.3145 20.2571C52.4437 20.1776 52.5083 20.0483 52.5083 19.8693V19.8345C52.5083 19.4003 52.3857 19.0639 52.1404 18.8253C51.8985 18.5866 51.5372 18.4673 51.0566 18.4673C50.5562 18.4673 50.1618 18.5784 49.8734 18.8004C49.5884 19.0192 49.3912 19.2628 49.2818 19.5312L47.8848 19.2131C48.0505 18.7491 48.2924 18.3745 48.6106 18.0895C48.9321 17.8011 49.3017 17.5923 49.7193 17.4631C50.1369 17.3305 50.5761 17.2642 51.0368 17.2642C51.3417 17.2642 51.6648 17.3007 52.0062 17.3736C52.3509 17.4432 52.6724 17.5724 52.9707 17.7614C53.2723 17.9503 53.5192 18.2204 53.7115 18.5717C53.9037 18.9197 53.9998 19.3722 53.9998 19.929V25H52.5481V23.956H52.4885C52.3923 24.1482 52.2482 24.3371 52.0559 24.5227C51.8637 24.7083 51.6168 24.8625 51.3152 24.9851C51.0136 25.1077 50.6523 25.169 50.2314 25.169ZM50.5545 23.9759C50.9655 23.9759 51.3168 23.8946 51.6085 23.7322C51.9035 23.5698 52.1272 23.3577 52.2797 23.0959C52.4354 22.8307 52.5133 22.5473 52.5133 22.2457V21.2614C52.4603 21.3144 52.3575 21.3641 52.2051 21.4105C52.0559 21.4536 51.8852 21.4917 51.693 21.5249C51.5008 21.5547 51.3135 21.5829 51.1312 21.6094C50.9489 21.6326 50.7965 21.6525 50.6738 21.669C50.3855 21.7055 50.122 21.7668 49.8833 21.853C49.648 21.9392 49.4591 22.0634 49.3166 22.2259C49.1774 22.3849 49.1078 22.5971 49.1078 22.8622C49.1078 23.2301 49.2437 23.5085 49.5154 23.6974C49.7872 23.883 50.1336 23.9759 50.5545 23.9759ZM62.239 17.3636L59.4698 25H57.8789L55.1048 17.3636H56.7006L58.6346 23.2401H58.7141L60.6431 17.3636H62.239ZM66.6674 25.1541C65.9151 25.1541 65.2671 24.9934 64.7235 24.6719C64.1833 24.3471 63.7657 23.8913 63.4707 23.3047C63.179 22.7147 63.0332 22.0237 63.0332 21.2315C63.0332 20.4493 63.179 19.7599 63.4707 19.1634C63.7657 18.5668 64.1767 18.1011 64.7037 17.7663C65.234 17.4316 65.8538 17.2642 66.563 17.2642C66.9939 17.2642 67.4115 17.3355 67.8159 17.478C68.2202 17.6205 68.5832 17.8442 68.9047 18.1491C69.2261 18.4541 69.4797 18.8501 69.6653 19.3374C69.8509 19.8213 69.9437 20.4096 69.9437 21.1023V21.6293H63.8734V20.5156H68.487C68.487 20.1245 68.4075 19.7782 68.2484 19.4766C68.0893 19.1716 67.8656 18.9313 67.5772 18.7557C67.2922 18.58 66.9574 18.4922 66.573 18.4922C66.1554 18.4922 65.7908 18.5949 65.4792 18.8004C65.171 19.0026 64.9324 19.2678 64.7633 19.5959C64.5976 19.9207 64.5147 20.2737 64.5147 20.6548V21.5249C64.5147 22.0353 64.6042 22.4695 64.7832 22.8274C64.9655 23.1854 65.219 23.4588 65.5439 23.6477C65.8687 23.8333 66.2482 23.9261 66.6824 23.9261C66.9641 23.9261 67.2209 23.8864 67.4529 23.8068C67.685 23.724 67.8855 23.6013 68.0545 23.4389C68.2235 23.2765 68.3528 23.076 68.4423 22.8374L69.8493 23.0909C69.7366 23.5052 69.5344 23.8681 69.2427 24.1797C68.9544 24.4879 68.5914 24.7282 68.1539 24.9006C67.7198 25.0696 67.2243 25.1541 66.6674 25.1541Z\" fill=\"black\"/>\r\n                        </svg>\r\n                    </li>\r\n                </ul>\r\n                <ul class=\"canvas_navbar\">\r\n                    <!--\r\n                    <li @click=\"currentTool='hand'\" :class=\"{active_tool : currentTool=='hand'}\">\r\n                        <i class=\"el-icon-thumb\"></i>\r\n                        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                            <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M20.1918 5.54428L20.1898 5.54249C19.8383 5.1906 19.3685 4.99674 18.8679 4.99674C18.4124 4.99674 17.9948 5.16113 17.6709 5.4339V4.85661C17.6709 4.35874 17.4756 3.88916 17.1208 3.53453C16.7689 3.18265 16.3008 2.98879 15.8031 2.98879C15.3477 2.98879 14.93 3.15317 14.6061 3.42595V2.84879C14.6061 2.35333 14.4131 1.88441 14.0605 1.52671C13.7087 1.17482 13.2393 0.980957 12.7385 0.980957C11.7108 0.980957 10.8748 1.81883 10.8748 2.84879V3.00015C10.5623 2.73664 10.1724 2.58299 9.76059 2.56378C9.26989 2.54083 8.79655 2.72247 8.4276 3.07503C8.03518 3.44954 7.81026 3.97332 7.81026 4.51219V12.0897L6.73914 10.2741C6.40255 9.70963 5.78585 9.35905 5.12977 9.35905C4.79758 9.35905 4.47044 9.44792 4.18186 9.61686C3.2989 10.1406 3.00561 11.2876 3.5129 12.1452L7.23326 20.1423C8.33817 22.303 10.1975 23.2242 13.6038 22.981C19.0882 22.6773 20.7352 20.6685 20.7352 18.1339V6.86439C20.7352 6.3691 20.5424 5.90023 20.1918 5.54428ZM13.6038 22.303C17.2111 22.1082 20.0687 21.1929 20.0687 18.1338L20.069 6.86456C20.069 6.54568 19.9443 6.24328 19.7178 6.01298C19.4918 5.78756 19.1904 5.66353 18.8681 5.66353C18.208 5.66353 17.6712 6.20224 17.6712 6.86453V10.6534C17.6712 10.8375 17.5221 10.9868 17.3378 10.9868C17.1536 10.9868 17.0045 10.8375 17.0045 10.6534V4.85678C17.0045 4.53695 16.8785 4.23488 16.6497 4.00604C16.4238 3.78012 16.123 3.65561 15.8034 3.65561C15.1435 3.65561 14.6064 4.19449 14.6064 4.85678V9.27968C14.6064 9.46377 14.4573 9.61301 14.2731 9.61301C14.0888 9.61301 13.9397 9.46377 13.9397 9.27968V2.84886C13.9397 2.5297 13.8147 2.22679 13.5875 1.99633C13.3636 1.7722 13.0615 1.64769 12.7387 1.64769C12.0787 1.64769 11.5418 2.18657 11.5418 2.84886V10.0547C11.5418 10.2388 11.3925 10.388 11.2085 10.388C11.0244 10.388 10.8751 10.2388 10.8751 10.0547V4.42969C10.8751 4.10969 10.7492 3.80762 10.5206 3.57894C10.3092 3.36768 10.0284 3.24365 9.72993 3.22982C9.42347 3.21289 9.12414 3.33171 8.88814 3.55713C8.62691 3.80646 8.47717 4.15463 8.47717 4.51221V13.3105C8.47717 13.4608 8.37659 13.5926 8.23157 13.6321C8.08671 13.672 7.93322 13.6094 7.85673 13.48L6.16598 10.6141C5.94986 10.2516 5.55257 10.0256 5.13003 10.0256C4.91323 10.0256 4.70815 10.0812 4.52065 10.1911C3.95458 10.5269 3.76627 11.2648 4.10253 11.8351L7.83802 19.8609C8.53135 21.3513 9.85379 22.5054 13.6038 22.303Z\" fill=\"black\"/>\r\n                            <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M20.1918 5.54428L20.1898 5.54249C19.8383 5.1906 19.3685 4.99674 18.8679 4.99674C18.4124 4.99674 17.9948 5.16113 17.6709 5.4339V4.85661C17.6709 4.35874 17.4756 3.88916 17.1208 3.53453C16.7689 3.18265 16.3008 2.98879 15.8031 2.98879C15.3477 2.98879 14.93 3.15317 14.6061 3.42595V2.84879C14.6061 2.35333 14.4131 1.88441 14.0605 1.52671C13.7087 1.17482 13.2393 0.980957 12.7385 0.980957C11.7108 0.980957 10.8748 1.81883 10.8748 2.84879V3.00015C10.5623 2.73664 10.1724 2.58299 9.76059 2.56378C9.26989 2.54083 8.79655 2.72247 8.4276 3.07503C8.03518 3.44954 7.81026 3.97332 7.81026 4.51219V12.0897L6.73914 10.2741C6.40255 9.70963 5.78585 9.35905 5.12977 9.35905C4.79758 9.35905 4.47044 9.44792 4.18186 9.61686C3.2989 10.1406 3.00561 11.2876 3.5129 12.1452L7.23326 20.1423C8.33817 22.303 10.1975 23.2242 13.6038 22.981C19.0882 22.6773 20.7352 20.6685 20.7352 18.1339V6.86439C20.7352 6.3691 20.5424 5.90023 20.1918 5.54428ZM13.6038 22.303C17.2111 22.1082 20.0687 21.1929 20.0687 18.1338L20.069 6.86456C20.069 6.54568 19.9443 6.24328 19.7178 6.01298C19.4918 5.78756 19.1904 5.66353 18.8681 5.66353C18.208 5.66353 17.6712 6.20224 17.6712 6.86453V10.6534C17.6712 10.8375 17.5221 10.9868 17.3378 10.9868C17.1536 10.9868 17.0045 10.8375 17.0045 10.6534V4.85678C17.0045 4.53695 16.8785 4.23488 16.6497 4.00604C16.4238 3.78012 16.123 3.65561 15.8034 3.65561C15.1435 3.65561 14.6064 4.19449 14.6064 4.85678V9.27968C14.6064 9.46377 14.4573 9.61301 14.2731 9.61301C14.0888 9.61301 13.9397 9.46377 13.9397 9.27968V2.84886C13.9397 2.5297 13.8147 2.22679 13.5875 1.99633C13.3636 1.7722 13.0615 1.64769 12.7387 1.64769C12.0787 1.64769 11.5418 2.18657 11.5418 2.84886V10.0547C11.5418 10.2388 11.3925 10.388 11.2085 10.388C11.0244 10.388 10.8751 10.2388 10.8751 10.0547V4.42969C10.8751 4.10969 10.7492 3.80762 10.5206 3.57894C10.3092 3.36768 10.0284 3.24365 9.72993 3.22982C9.42347 3.21289 9.12414 3.33171 8.88814 3.55713C8.62691 3.80646 8.47717 4.15463 8.47717 4.51221V13.3105C8.47717 13.4608 8.37659 13.5926 8.23157 13.6321C8.08671 13.672 7.93322 13.6094 7.85673 13.48L6.16598 10.6141C5.94986 10.2516 5.55257 10.0256 5.13003 10.0256C4.91323 10.0256 4.70815 10.0812 4.52065 10.1911C3.95458 10.5269 3.76627 11.2648 4.10253 11.8351L7.83802 19.8609C8.53135 21.3513 9.85379 22.5054 13.6038 22.303Z\" stroke=\"black\" stroke-width=\"0.5\"/>\r\n                        </svg>\r\n                    </li>\r\n                    //-->\r\n                    <li @click=\"currentTool='mark'\" :class=\"{active_tool : currentTool=='mark'}\">\r\n                        <!--    <i class=\"el-icon-chat-square\"></i> //-->\r\n                        <svg width=\"40\" height=\"40\" viewBox=\"0 0 40 40\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                            <path d=\"M15.7455 29.0171L15.6538 28.4241L15.7455 29.0171ZM15.9225 29.0432L15.6657 29.5855L15.9225 29.0432ZM9.87038 29.3984L9.40186 29.0236L9.87038 29.3984ZM10.1505 29.8823L10.0588 29.2893L10.1505 29.8823ZM12.2414 26.0603L12.7185 25.6964L12.2414 26.0603ZM12.2394 26.4372L12.7079 26.812L12.2394 26.4372ZM29.5965 20C29.5965 25.1915 25.388 29.4 20.1965 29.4V30.6C26.0507 30.6 30.7965 25.8542 30.7965 20H29.5965ZM20.1965 10.6C25.388 10.6 29.5965 14.8085 29.5965 20H30.7965C30.7965 14.1458 26.0507 9.4 20.1965 9.4V10.6ZM10.7965 20C10.7965 14.8085 15.005 10.6 20.1965 10.6V9.4C14.3423 9.4 9.59649 14.1458 9.59649 20H10.7965ZM12.7185 25.6964C11.5125 24.1158 10.7965 22.1423 10.7965 20H9.59649C9.59649 22.4144 10.4044 24.6419 11.7644 26.4243L12.7185 25.6964ZM10.3389 29.7732L12.7079 26.812L11.7708 26.0623L9.40186 29.0236L10.3389 29.7732ZM15.6538 28.4241L10.0588 29.2893L10.2422 30.4752L15.8372 29.61L15.6538 28.4241ZM20.1965 29.4C18.758 29.4 17.3966 29.0773 16.1792 28.5009L15.6657 29.5855C17.0402 30.2363 18.5767 30.6 20.1965 30.6V29.4ZM15.8372 29.61C15.776 29.6195 15.7164 29.6095 15.6657 29.5855L16.1792 28.5009C16.0183 28.4247 15.8355 28.396 15.6538 28.4241L15.8372 29.61ZM9.40186 29.0236C8.88929 29.6643 9.43131 30.6006 10.2422 30.4752L10.0588 29.2893C10.3291 29.2475 10.5098 29.5596 10.3389 29.7732L9.40186 29.0236ZM11.7644 26.4243C11.6877 26.3238 11.6811 26.1745 11.7708 26.0623L12.7079 26.812C12.973 26.4806 12.9655 26.0202 12.7185 25.6964L11.7644 26.4243Z\" fill=\"black\"/>\r\n                        </svg>\r\n                    </li>\r\n                    <!--\r\n                    <li @click=\"zoomCanvas('in')\">\r\n                        <i class=\"el-icon-zoom-in\"></i>\r\n                        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                            <path d=\"M15.8053 15.8013L21 21M10.5 7.5V13.5M7.5 10.5H13.5M18 10.5C18 14.6421 14.6421 18 10.5 18C6.35786 18 3 14.6421 3 10.5C3 6.35786 6.35786 3 10.5 3C14.6421 3 18 6.35786 18 10.5Z\" stroke=\"black\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n                        </svg>\r\n                    </li>\r\n                    <li @click=\"zoomCanvas('out')\">\r\n                        <i class=\"el-icon-zoom-out\"></i>\r\n                        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                            <path d=\"M16 16L21 21M7.5 10.5H13.5M18 10.5C18 14.6421 14.6421 18 10.5 18C6.35786 18 3 14.6421 3 10.5C3 6.35786 6.35786 3 10.5 3C14.6421 3 18 6.35786 18 10.5Z\" stroke=\"black\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n                        </svg>\r\n                    </li>\r\n                    //-->\r\n                </ul>\r\n                <div class=\"canvas_body\">\r\n                    <div class=\"canvas_img\"></div>\r\n                    <canvas id=\"canvasImg\"></canvas>\r\n                    <canvas id=\"canvasDrawing\" @mousedown=\"onCanvasMouseDown\" @mouseup=\"onCanvasMouseUp\"></canvas>\r\n                    <div id=\"canvasMarks\">\r\n                        <span v-for=\"(item, index) in marks\" :key=\"index\" :class=\"{mark_non_canvas : !(item.pos_x > 0)}\" :style=\"{left: item.pos.x + 'px', top: item.pos.y + 'px', position: 'absolute'}\">\r\n                            <svg width=\"25\" height=\"25\" viewBox=\"0 0 25 25\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                                <path d=\"M0 12.5C0 5.59644 5.59644 0 12.5 0V0C19.4036 0 25 5.59644 25 12.5V12.5C25 19.4036 19.4036 25 12.5 25H0V12.5Z\" fill=\"#F84D46\"/>\r\n                            </svg>\r\n                            <label>{{item.num}}</label>\r\n                        </span>\r\n                        <!--\r\n                        <i class=\"designer- designer-map-thumbtack-full\" v-for=\"(item, index) in marks\" :key=\"index\" :style=\"{left: item.pos.x + 'px', top: item.pos.y + 'px', position: 'absolute'}\">\r\n                \r\n                            <span :id=\"item.id\" @click=\"editMark(item.id)\">{{item.num}}</span>\r\n                        </i>\r\n//-->\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n\r\n            <div class=\"marks\" v-if=\"marks.length > 0\">\r\n                <div class=\"mark_item\" v-for=\"(item, index) in marks\" :key=\"item.id\">\r\n                    <div class=\"mark_item_num\">\r\n                        # {{item.num}}\r\n                        <span :class=\"{mark_canvas : item.pos_x > 0}\"></span>\r\n                    </div>\r\n                    <div class=\"mark_item_user\">{{item.user_name}}</div>\r\n                    <div class=\"mark_item_time\">\r\n                            <span>{{item.create_time}}</span>\r\n                            <!--\r\n                            <span>{{item.status}}</span>\r\n                            //-->\r\n                    </div>\r\n                    <div class=\"mark_item_main\">\r\n                        <pre class=\"mark_item_title\">{{item.content}}</pre>\r\n                    </div>\r\n                    <div class=\"mark_item_menu\" v-if=\"user.id >= 0\">\r\n                        <i class=\"el-icon-edit-outline\" @click=\"openEditDialog(item.id, index)\"></i>\r\n                        <i class=\"el-icon-microphone\" :class=\"{has_content : item.playback !== null}\" @click=\"openEditDialog(item.id, index)\"></i>\r\n                        <i class=\"el-icon-delete\" @click=\"del(item.id, index)\"></i>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"marks nodata\" v-if=\"marks.length == 0\">\r\n                {{lang.nodata}}\r\n            </div>\r\n            <div class=\"form\">\r\n                <template v-if=\"this.user.id != 0\">\r\n                    <el-input type=\"textarea\" rows=\"8\" v-model=\"form\" :placeholder=\"lang.inp\"></el-input>\r\n                    <el-button :loading=\"forming\" size=\"small\" type=\"primary\" style=\"margin-top: 0px; width: 100%; background-color: #345CA0; padding: 15px 0px; border-color: #345CA0; border-radius: 0px;\" @click=\"submitForm\">{{lang.inpSub}}</el-button>\r\n                </template>\r\n            </div>\r\n        </div>\r\n        \r\n        <!-- EditDialog -->\r\n        <el-dialog :title=\"lang2.edit\" :visible.sync=\"editForm.show\" width=\"40%\" class=\"edit-dialog\" :before-close=\"() => {}\" :show-close=\"false\">\r\n            <div>記點 : <span>{{editForm.num}}</span></div>\r\n            <el-input type=\"textarea\" :autosize=\"{minRows:3,maxRows:6}\" v-model=\"editForm.content\" style=\"margin-top: 20px\" :placeholder=\"lang2.addContent\"></el-input>\r\n            <div style=\"margin-top: 20px;\">\r\n                <el-row>\r\n                    <el-col :span=\"4\"><i class=\"el-icon-microphone\" :class=\"{record_recording : isRecording}\"  @click=\"onRecorderClick\"></i><span class=\"record_conutdown\" :class=\"{record_recording : isRecording}\">{{recorderCountDown}}</span></el-col>\r\n                    <el-col :span=\"20\"><audio class=\"record_playback\" :src=\"editForm.playback\" controls></audio></el-col>\r\n                </el-row>\r\n            </div>\r\n            <span slot=\"footer\">\r\n                <el-button @click=\"closeEditDialog\" size=\"small\" :disabled=\"isRecording\">{{lang2.tips19}}</el-button>\r\n                <el-button type=\"primary\" @click=\"updateMark\" size=\"small\" :disabled=\"isRecording\">{{lang2.tips20}}</el-button>\r\n            </span>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import timer from '../tools/timer';\r\n    import global from '@/tools/global';\r\n    export default {\r\n        name: 'project',\r\n        data (){\r\n            return {\r\n                loading: true,\r\n                info: {},\r\n                marks: [],\r\n                uploading: false,\r\n                lang: {},\r\n                lang2: {},\r\n                form: '',\r\n                forming: false,\r\n                editForm: {\r\n                    show: false,\r\n                    num: 0,\r\n                    title: '',\r\n                    content: '',\r\n                    rec: null,\r\n                    playback: null,\r\n                    pos: {x:-1,y:-1},\r\n                    id: 0\r\n                },\r\n                httping: false,\r\n                user: {},\r\n\r\n\r\n                currentTool: '',\r\n                brushColor: '#000000',\r\n                canvasBody: {\r\n                    width: 0,\r\n                    height: 0\r\n                },\r\n                canvasImg: {\r\n                    width: 0,\r\n                    height: 0\r\n                },\r\n                currentCanvas: {\r\n                    width: 0,\r\n                    height: 0,\r\n                    top: 0,\r\n                    left: 0,\r\n\r\n                },\r\n                isCanvasMouseDown: false,\r\n                canvasContext: null,\r\n                canvasHistorys: [],\r\n                currentHistory : -1,\r\n\r\n                tempPosition: null,\r\n                tempCanvas: null,\r\n                \r\n\r\n                recorderStream: null,\r\n                recorderChunks: [],\r\n                recorderMedia: null,\r\n                recorderCountDown: 20,\r\n                isSupportRecording: false,\r\n                isRecording: false,\r\n                setRecorderInterval: null\r\n            }\r\n        },\r\n\r\n        beforeMount (){\r\n            this.lang = this.$lang('project');\r\n            this.lang2 = this.$lang('canvas');\r\n            this.$ajax.get(`/project/get/?id=${this.$route.query.id}`).then(r => {\r\n                this.marks = r.marks.map(item => {\r\n                    item.create_time = timer.time('y-m-d h:i:s', item.create_time * 1000);\r\n                    item.status = this.lang.status[item.status];\r\n                    item.pos = {x:-1,y:-1};\r\n                    return item;\r\n                })\r\n                //r.img_url = r.img_url.match('http') ? r.img_url : global.host + r.img_url;\r\n                this.info = r;\r\n                //this.loading = false;\r\n                this.setCanvas();\r\n                this.setRecorder() ;\r\n            })\r\n        },\r\n        mounted (){\r\n            this.user = JSON.parse(localStorage.getItem('designer_user'));\r\n            this.setWindowEvent();\r\n        },\r\n        methods: {\r\n            // 分享\r\n            share (){\r\n                this.$copy(this.info.group_id, this.info.title);\r\n            },\r\n            // 添加标记点监听\r\n            addMarks (r){\r\n                let data = this.marks.map(item => item);\r\n                data.push(r);\r\n                this.marks = data;\r\n            },\r\n            // 删除标记点\r\n            del (id, index){\r\n                this.$ajax.get(`/marks/del/?id=${id}`).then(result => {\r\n                    this.marks.splice(index, 1);\r\n                    this.$message.success('success');\r\n                })\r\n            },\r\n\r\n\r\n            // EditDialog\r\n            openEditDialog (id, index){\r\n                console.log(this.marks[index]) ;\r\n                this.editForm = {\r\n                    show: true,\r\n                    num: this.marks[index].num,\r\n                    title: this.marks[index].title,\r\n                    content: this.marks[index].content,\r\n                    rec: null,\r\n                    playback: this.marks[index].playback === null ? '' : this.marks[index].playback,\r\n                    pos: {x:this.marks[index].pos.x,y:this.marks[index].pos.y},\r\n                    id\r\n                }\r\n            },\r\n\r\n            closeEditDialog (){\r\n                document.querySelector('.record_playback').pause() ;\r\n                this.editForm = {\r\n                    show: false,\r\n                    num: 0,\r\n                    title: '',\r\n                    content: '',\r\n                    rec: null,\r\n                    playback: null,\r\n                    pos: {x:-1,y:-1},\r\n                    id: 0\r\n                }\r\n            },\r\n\r\n            openAddDialog (pos){\r\n                pos.x = pos.x / this.currentCanvas.width ;\r\n                pos.y = pos.y / this.currentCanvas.height ;\r\n                this.editForm = {\r\n                    show: true,\r\n                    num: 0,\r\n                    title: '',\r\n                    content: '',\r\n                    rec: null,\r\n                    playback: '',\r\n                    pos: {x:pos.x,y:pos.y},\r\n                    id: 0\r\n                }\r\n            },\r\n\r\n            // Marks\r\n            updateMark (){\r\n                if(this.httping) return;\r\n                this.httping = true;\r\n\r\n                if (this.editForm.num == 0) {\r\n                    this.addMark() ;\r\n                } else {\r\n                    let data = {\r\n                        title: this.editForm.title,\r\n                        content: this.editForm.content,\r\n                        rec: this.editForm.rec,\r\n                        id: this.editForm.id\r\n                    } ;\r\n                    this.$ajax.post('/marks/edit/', data).then(result => {\r\n                        this.marks = this.marks.map(item => {\r\n                            if(item.id == this.editForm.id){\r\n                                item.title = data.title;\r\n                                item.content = data.content;\r\n                                if (data.rec !== null)\r\n                                    item.playback = data.rec ;\r\n                            }\r\n                            return item;\r\n                        })\r\n                        this.httping = false;\r\n                        this.closeEditDialog() ;\r\n                    }) ;\r\n                }\r\n            },\r\n\r\n            addMark () {\r\n                let num = 0;\r\n                this.marks.map(item => {\r\n                    if(item.num >= num){\r\n                        num = Number(item.num);\r\n                    }\r\n                })\r\n                num++;\r\n\r\n                let data = {\r\n                    title: this.editForm.title,\r\n                    content: this.editForm.content,\r\n                    rec: this.editForm.rec,\r\n                    id: this.editForm.id,\r\n                    projectId: this.$route.query.id,\r\n                    createrId: JSON.parse(localStorage.getItem('designer_user')).id,\r\n                    x: this.editForm.pos.x,\r\n                    y: this.editForm.pos.y,\r\n                    num\r\n                }\r\n                this.$ajax.post('/marks/add/', data).then(result => {\r\n                    /*\r\n                    this.marks = this.marks.map(item => {\r\n                        if(item.id == this.editForm.id){\r\n                            item.title = data.title;\r\n                            item.content = data.content;\r\n                            if (data.rec !== null)\r\n                                item.playback = data.rec ;\r\n                        }\r\n                        return item;\r\n                    })\r\n                    this.httping = false;\r\n                    this.closeEditDialog() ;\r\n                    */\r\n\r\n                    result.create_time = timer.time('y-m-d h:i:s', result.create_time * 1000);\r\n                    result.status = this.lang.status[result.status];\r\n                    result.pos = {x:-1,y:-1};\r\n                    result.pos.x = result.pos_x * this.currentCanvas.width ;\r\n                    result.pos.y = result.pos_y * this.currentCanvas.height - 25 ;\r\n                    this.marks.push(result);\r\n                    this.httping = false;\r\n                    this.closeEditDialog() ;\r\n                })\r\n\r\n\r\n            },\r\n\r\n            resetMarks() {\r\n                this.marks = this.marks.map(item => {\r\n                    item.pos.x = item.pos_x * this.currentCanvas.width ;\r\n                    item.pos.y = item.pos_y * this.currentCanvas.height - 25 ;\r\n                    return item;\r\n                }) ;\r\n\r\n            },\r\n\r\n\r\n\r\n\r\n            // 添加描述\r\n            submitForm (){\r\n                if(this.user.id == 0){\r\n                    this.$message.warning('Please login before');\r\n                    return;\r\n                }\r\n                if(this.form == ''){\r\n                    this.$message.warning(\"Can't submit empty text\");\r\n                    return;\r\n                }\r\n                this.forming = true;\r\n                // 计算 num\r\n                let num = 0;\r\n                this.marks.map(item => {\r\n                    if(item.num >= num){\r\n                        num = Number(item.num);\r\n                    }\r\n                })\r\n                num++;\r\n\r\n                // 添加的数据\r\n                let data = {\r\n                    title: '',\r\n                    content: this.form,\r\n                    rec: null,\r\n                    id: 0,\r\n                    projectId: this.$route.query.id,\r\n                    createrId: JSON.parse(localStorage.getItem('designer_user')).id,\r\n                    x: 0,\r\n                    y: 0,\r\n                    num\r\n                }\r\n                \r\n                this.$ajax.post('/marks/add/', data).then(result => {\r\n                    result.create_time = timer.time('y-m-d h:i:s', result.create_time * 1000);\r\n                    result.status = this.lang.status[result.status];\r\n                    result.pos = {x:-1,y:-1};\r\n                    result.pos.x = result.pos_x * this.currentCanvas.width ;\r\n                    result.pos.y = result.pos_y * this.currentCanvas.height - 25 ;\r\n                    this.marks.push(result);\r\n                    this.form = '';\r\n                    this.forming = false;\r\n                })\r\n            },\r\n\r\n\r\n            // Init Canvas\r\n            getCanvas () {\r\n                this.$ajax.get(`/canvas/get/?id=${this.$route.query.id}`).then(result => {\r\n                    if (result.length > 0) {\r\n                        let image = new Image() ;\r\n                        image.onload = () => {\r\n                            this.canvasContext.drawImage(image, 0, 0, this.currentCanvas.width, this.currentCanvas.height);\r\n                            this.saveCanvasToHistory() ;\r\n                        }\r\n                        image.src = result[0].path ;\r\n                    } else {\r\n                        this.saveCanvasToHistory() ;\r\n                    }\r\n                    \r\n                })\r\n            },\r\n\r\n            setCanvas(){       \r\n                let canvas_body = document.querySelector('.canvas_body') ;\r\n                let canvas_img = document.querySelector('.canvas_img') ;\r\n\r\n                this.canvasBody = {\r\n                    width: canvas_body.clientWidth,\r\n                    height: canvas_body.clientHeight\r\n                }\r\n              \r\n                let image = new Image() ;\r\n                image.onload = () => {\r\n                    this.loading = false;\r\n                    this.canvasImg = {\r\n                        width: image.naturalWidth,\r\n                        height: image.naturalHeight\r\n                    }\r\n\r\n                    let canvas_img = document.querySelector('.canvas_img') ;\r\n                    let canvasImg = document.querySelector('#canvasImg') ;\r\n                    let canvasDrawing = document.querySelector('#canvasDrawing') ;\r\n                    let canvasMarks = document.querySelector('#canvasMarks') ;\r\n\r\n                    let ctx = canvasDrawing.getContext('2d') ;\r\n                    ctx.lineCap = \"round\" ;\r\n                    ctx.lineJoin = \"round\" ;\r\n                    this.canvasContext = ctx ;\r\n\r\n                    let ctxImg = canvasImg.getContext('2d') ;\r\n\r\n                    if (this.canvasImg.width >= this.canvasImg.height) {\r\n                        this.currentCanvas.height = this.canvasBody.height * 0.85 ;\r\n                        this.currentCanvas.width  = (this.currentCanvas.height / this.canvasImg.height) * this.canvasImg.width ;\r\n                    } else {\r\n                        this.currentCanvas.width = this.canvasBody.width * 0.85 ;\r\n                        this.currentCanvas.height = (this.currentCanvas.width / this.canvasImg.width) * this.canvasImg.height ;\r\n                    }\r\n\r\n                    // Centering\r\n                    //this.currentCanvas.top = 100 ;\r\n                    this.currentCanvas.top = 0 ;\r\n                    this.currentCanvas.left = this.canvasBody.width / 2 - this.currentCanvas.width  / 2 ;\r\n\r\n                    canvas_img.style.cssText = 'top: ' + this.currentCanvas.top + 'px; left: ' + this.currentCanvas.left + 'px; width: ' + this.currentCanvas.width + 'px; height: ' + this.currentCanvas.height + 'px'  ;               \r\n\r\n                    canvasMarks.style.cssText = 'top: ' + this.currentCanvas.top + 'px; left: ' + this.currentCanvas.left + 'px; width: ' + this.currentCanvas.width + 'px; height: ' + this.currentCanvas.height + 'px'  ;                \r\n                    \r\n                    canvasImg.style.cssText = 'top: ' + this.currentCanvas.top + 'px; left: ' + this.currentCanvas.left + 'px' ;\r\n                    canvasImg.width  = this.currentCanvas.width ;\r\n                    canvasImg.height  = this.currentCanvas.height ;\r\n                    \r\n                    canvasDrawing.style.cssText = 'top: ' + this.currentCanvas.top + 'px; left: ' + this.currentCanvas.left + 'px' ;\r\n                    canvasDrawing.width  = this.currentCanvas.width ;\r\n                    canvasDrawing.height  = this.currentCanvas.height ;\r\n\r\n                    ctxImg.drawImage(image, 0, 0, this.currentCanvas.width, this.currentCanvas.height);\r\n                    this.getCanvas() ;\r\n\r\n                    //this.saveCanvasToHistory() ;\r\n                    this.resetMarks() ;\r\n                    console.log('loaded') ;\r\n                }\r\n                image.src = 'https://www.simplerevise.com//img/project/v2/content/' + this.info.img_url + '.jpg' ;\r\n                //image.style.width = '100%';\r\n                //canvas_img.appendChild(image) ;\r\n            }, \r\n\r\n\r\n            // Canvas Actions\r\n            saveCanvas(){\r\n                if (this.currentHistory > 0) {\r\n                    let ctx = this.canvasContext ;\r\n                    let canvas = ctx.canvas ;\r\n                    var imgData = canvas.toDataURL(\"image/png\", 1.0) ;\r\n                    let data = {\r\n                        projectId: this.$route.query.id,\r\n                        createrId: JSON.parse(localStorage.getItem('designer_user')).id,\r\n                        canvasPath: imgData\r\n                    }\r\n                    this.$ajax.post('/canvas/update/', data).then(result => {\r\n\r\n                    \r\n                    this.$notify({\r\n                        title: 'Save Canvas',\r\n                        message: 'Saved',\r\n                        type: 'warning'\r\n                    });\r\n                    \r\n                    })\r\n                    this.currentHistory = 0 ;\r\n                    this.canvasHistorys = this.canvasHistorys.slice(-1) ;\r\n                }\r\n            },\r\n\r\n            navCanvas(i) {\r\n                let ctx = this.canvasContext ;\r\n                switch(i){\r\n                    case -1 : \r\n                        if (this.currentHistory <= 0)\r\n                            return ;\r\n                        this.currentHistory -= 1 ;\r\n                        ctx.putImageData(this.canvasHistorys[this.currentHistory],0, 0) ;\r\n                    break ;\r\n                    case 1 : \r\n                        if (this.currentHistory >= this.canvasHistorys.length - 1)\r\n                            return ;\r\n                        this.currentHistory += 1 ;\r\n                        ctx.putImageData(this.canvasHistorys[this.currentHistory],0, 0) ;\r\n                    break ;\r\n                } ;\r\n            },\r\n  \r\n            zoomCanvas(e) {\r\n                this.$notify({\r\n                  title: 'Zoom Canvas',\r\n                  message: 'Function is under construction',\r\n                  type: 'warning'\r\n              });\r\n            },\r\n\r\n            saveCanvasToHistory(){\r\n                // Slice history while redraw\r\n                this.canvasHistorys = this.canvasHistorys.slice(0,this.currentHistory + 1) ;\r\n                let ctx = this.canvasContext ;\r\n                let canvas = ctx.canvas ;\r\n                let tempCanvas = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n                this.canvasHistorys.push(tempCanvas);\r\n                this.currentHistory += 1 ;\r\n                if (this.canvasHistorys.length > 15) {\r\n                    this.canvasHistorys.shift() ;\r\n                    this.currentHistory -= 1 ;\r\n                }\r\n            },\r\n\r\n\r\n            // Canvas Listeners\r\n            onCanvasMouseDown(e){ \r\n                if (e.button != 2) {\r\n                    console.log('onCanvasMouseDown') ;\r\n                    switch(this.currentTool){\r\n                        case 'paint-brush' : \r\n                            this.isCanvasMouseDown = true ;\r\n                            //this.setTempCanvas() ;\r\n                        break;\r\n                        case 'eraser' : \r\n                            //this.isCanvasMouseDown = true ;\r\n                            //this.setTempCanvas() ;\r\n                            this.$notify({\r\n                                title: 'Eraser',\r\n                                message: 'Function is under construction',\r\n                                type: 'warning'\r\n                            });\r\n                        break;\r\n                        case 'square' : \r\n                            //this.isCanvasMouseDown = true ;\r\n                            //this.setTempCanvas() ;\r\n                            this.$notify({\r\n                                title: 'Square',\r\n                                message: 'Function is under construction',\r\n                                type: 'warning'\r\n                            });\r\n                        break;\r\n                        case 'hand' : \r\n                            this.$notify({\r\n                                title: 'Move Canvas',\r\n                                message: 'Function is under construction',\r\n                                type: 'warning'\r\n                            });\r\n                        break;\r\n                        case 'mark' : \r\n                            this.openAddDialog(this.getCanvasMousePosition(e.clientX,e.clientY)) ;\r\n                            break;\r\n                        /*\r\n                        this.$notify({\r\n                                title: 'Mark Canvas',\r\n                                message: 'Function is under construction',\r\n                                type: 'warning'\r\n                            });\r\n                        break;\r\n                        */\r\n                    }\r\n                }\r\n            },\r\n\r\n            onCanvasMouseUp(){\r\n                console.log('onCanvasMouseUp') ;\r\n                if (this.isCanvasMouseDown) {\r\n                    this.saveCanvasToHistory() ;\r\n                    this.resetToolState() ;\r\n                }\r\n            },\r\n\r\n            setWindowEvent(){\r\n                let canvas = document.querySelector('#canvasDrawing') ;\r\n                //window.addEventListener('mousemove',(event)=>{\r\n                canvas.addEventListener('mousemove',(event)=>{  \r\n                    let currentPos = this.getCanvasMousePosition(event.clientX,event.clientY) ;\r\n                    /*\r\n                    if(this.isSizing && this.tempPosition ){\r\n                    let dragValue= currentPos.y- this.tempPosition.y \r\n                    this.checkSizeDrag(dragValue)\r\n                    }\r\n                    */\r\n                    if(this.isCanvasMouseDown && this.tempPosition){\r\n                        let pos = this.getCanvasMousePosition(event.clientX,event.clientY) ;\r\n\r\n                        switch(this.currentTool){\r\n                        case 'paint-brush' : \r\n                                this.drawCanvas((ctx)=>{\r\n                                    ctx.strokeStyle = this.brushColor ;\r\n                                    ctx.moveTo(this.tempPosition.x,this.tempPosition.y) ;\r\n                                    ctx.lineTo(pos.x,pos.y) ;\r\n                                })\r\n                                break;\r\n                        /*\r\n                        case 'eraser' :\r\n                                this.drawCanvas((ctx)=>{\r\n                                ctx.strokeStyle = this.backgroundColor\r\n                                ctx.moveTo(this.tempPosition.x,this.tempPosition.y)\r\n                                ctx.lineTo(pos.x,pos.y)\r\n                                }) \r\n                                break;  \r\n                        case 'square' :\r\n                                this.drawCanvas((ctx)=>{\r\n                                // ctx.moveTo(this.tempPosition.x,this.tempPosition.y)\r\n                                // ctx.lineTo(pos.x,pos.y)\r\n                                let currentPos = this.getCanvasMousePosition(event.clientX,event.clientY)\r\n                                \r\n                                ctx.strokeStyle =  this.currentColor.code\r\n                                let tempx = this.tempPosition.x\r\n                                let tempy = this.tempPosition.y\r\n                                let width = currentPos.x - tempx\r\n                                let height = currentPos.y - tempy\r\n                                \r\n                                ctx.putImageData(this.tempCanvas,0, 0)                      \r\n                                ctx.rect(tempx, tempy, width, height);\r\n                                })\r\n                                \r\n                                break;  \r\n                        */\r\n                        }\r\n                    }\r\n                    \r\n                    //if(this.currentTool=='square' && this.isCanvasMouseDown )return\r\n                    this.setCanvasTempPosition(currentPos.x,currentPos.y) ;\r\n                }) ;\r\n\r\n                canvas.addEventListener('mouseleave',(event)=>{\r\n                    this.onCanvasMouseUp() ;\r\n                }) ;\r\n\r\n                document.addEventListener('keypress',(e)=>{\r\n                    if (e.ctrlKey) {\r\n                        if (e.code == 'KeyZ') {\r\n                            this.navCanvas(-1) ;\r\n                        } ;\r\n                        if (e.code == 'KeyY') {\r\n                            this.navCanvas(1) ;\r\n                        }\r\n                    }\r\n                }) ;\r\n            },\r\n\r\n            setTempCanvas(){ \r\n            /*\r\n              let ctx = this.canvasContext\r\n              let canvas = ctx.canvas \r\n              let tempCanvas = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n              this.tempCanvas = tempCanvas;\r\n            */\r\n            }, \r\n\r\n            getCanvasMousePosition(clientX,clientY){\r\n              let canvasPosition = this.canvasContext.canvas.getBoundingClientRect() ;\r\n              let x = clientX-canvasPosition.x ;\r\n              let y = clientY-canvasPosition.y ;\r\n              //console.log({x,y}) ;\r\n              return {x,y} ;\r\n            },\r\n\r\n            setCanvasTempPosition(x,y){\r\n              this.tempPosition={x,y} ;\r\n            },\r\n\r\n            drawCanvas(action){\r\n              let canvasContext = this.canvasContext ;\r\n              canvasContext.beginPath() ;\r\n              canvasContext.lineWidth = 2 ;        \r\n              action(canvasContext) ;\r\n              canvasContext.stroke() ;\r\n            },\r\n\r\n            resetToolState(){\r\n                this.tempPosition = null ;\r\n                this.isCanvasMouseDown = false ;\r\n            },\r\n\r\n\r\n            // Recorder\r\n            setRecorder() {\r\n                if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia)\r\n                    this.isSupportRecording = true ;\r\n            },\r\n\r\n            onRecorderClick() {\r\n                this.isRecording = !this.isRecording ;\r\n                if (this.isRecording) {\r\n                    if (this.isSupportRecording) {\r\n                        navigator.mediaDevices.getUserMedia({audio: true, video: false})\r\n                        .then(this.handleDevicesSuccess)\r\n                        .catch(this.handleDevicesError) ;\r\n                    } else {\r\n                        this.handleDevicesError() ;\r\n                    }\r\n                } else {\r\n                    clearInterval(this.setRecorderInterval) ;\r\n                    this.recorderMedia.stop() ;\r\n                    this.recorderCountDown = 20 ;\r\n                }\r\n            },\r\n\r\n            handleDevicesSuccess(stream) {\r\n                this.recorderStream = stream ;\r\n                this.recorderMedia = new MediaRecorder(stream) ;\r\n                this.recorderMedia.addEventListener('dataavailable',this.onRecorderMediaDataAvailable) ;\r\n                this.recorderMedia.addEventListener('stop',this.onRecorderMediaStop) ;\r\n                this.recorderMedia.start() ;\r\n                this.setRecorderInterval = setInterval(() => {\r\n                    if (this.isRecording && this.recorderCountDown > 0) {\r\n                        this.recorderCountDown -= 1 ;\r\n                    } else {\r\n                        this.onRecorderClick() ;\r\n                    }\r\n                },1000) ;\r\n            },\r\n\r\n            handleDevicesError(err) {\r\n                if (!this.isSupportRecording) {\r\n                    this.$notify({\r\n                        title: 'Reording is not supported',\r\n                        message: 'Recording is not supported on your browser',\r\n                        type: 'warning'\r\n                    });\r\n                } else {\r\n                    this.$notify({\r\n                        title: 'No Microphone Detected',\r\n                        message: 'Please make sure your device is properly connected',\r\n                        type: 'warning'\r\n                     });\r\n                }\r\n                this.isRecording = false ;\r\n            },\r\n\r\n            onRecorderMediaDataAvailable(e) {\r\n                this.recorderChunks.push(e.data) ;\r\n            },\r\n            \r\n            onRecorderMediaStop(e) {\r\n                //let blob = new Blob(this.recorderChunks, { 'type': 'audio/ogg; codecs=opus' }) ;\r\n                let blob = new Blob(this.recorderChunks, { 'type': 'audio/mp4; codecs=mp4a' }) ;\r\n                let audioURL = window.URL.createObjectURL(blob) ;\r\n                this.recorderChunks = [] ;\r\n                this.recorderStream.getAudioTracks().forEach(track => track.stop()) ;\r\n                this.recorderStream = null ;\r\n                document.querySelector('.record_playback').src = audioURL ;\r\n                let reader = new FileReader() ;\r\n                reader.readAsDataURL(blob) ;\r\n                reader.onloadend = () => {\r\n                    this.editForm.rec = reader.result ;\r\n                }\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n    .project{\r\n        width: 100%;\r\n        height: 100%;\r\n        overflow: hidden;\r\n        position: relative;\r\n        .project_head{\r\n            width: calc(100% - 30px);\r\n            height: 65px;\r\n            background: #FFFFFF;\r\n            position: absolute;\r\n            top: 0;\r\n            left: 0;\r\n            display: flex;\r\n            justify-content: space-between;\r\n            align-items: center;\r\n            color: #000000;\r\n            font-weight: 500;\r\n            padding: 0 15px;\r\n            border-bottom: 1px solid #E6E6E6;\r\n            .back{\r\n                cursor: pointer; \r\n            }\r\n            .share{\r\n                i{\r\n                    font-size: 16px;\r\n                    cursor: pointer;\r\n                    margin-right: 10px;\r\n                }\r\n            }\r\n        }\r\n        .project_main{\r\n            width: 100%;\r\n            height: calc(100% - 66px);\r\n            position: absolute;\r\n            top: 66px;\r\n            left: 0;\r\n            .canvas{\r\n                width: calc(100% - 299px);\r\n                height: 100%;\r\n                overflow: hidden;\r\n                position: absolute;\r\n                top: 0;\r\n                left: 299px;\r\n                .canvas_navbar {\r\n                    height: 40px;\r\n                    background-color: #FFFFFF;\r\n                    font-size: 20px;\r\n                    position: absolute;\r\n                    top: 0;\r\n                    right: 25px;\r\n                    li{\r\n                        display: inline-block;\r\n                        margin-right:5px;\r\n                        cursor: pointer;\r\n                        &:not(.active_tool):hover{\r\n                            background-color: #E8F3FE;\r\n                        }\r\n                        &.active_tool {\r\n                            background-color: #345CA0;\r\n                            path {\r\n                                stroke: #FFFFFF;\r\n                                fill: #FFFFFF;\r\n                            }\r\n                        }\r\n                        svg {\r\n                            display: block;\r\n                        }\r\n                    }\r\n                }\r\n                .canvas_toolbar {\r\n                    height: 40px;\r\n                    border-bottom: 1px solid  #E6E6E6;\r\n                    background-color: #FFFFFF;\r\n                    font-size: 20px;\r\n                    li{\r\n                        display: inline-block;\r\n                        margin-right:5px;\r\n                        cursor: pointer;\r\n                        &:not(.brush_color):not(.active_tool):not(.inactive_tool):hover{\r\n                            background-color: #E8F3FE;\r\n                        }\r\n                        &.active_tool {\r\n                            background-color: #345CA0;\r\n                            path {\r\n                                stroke: #FFFFFF;\r\n                            }\r\n                        }\r\n                        &.inactive_tool {\r\n                            path {\r\n                                stroke: #BFBDC5;\r\n                            }\r\n                        }\r\n                        &.brush_color {\r\n                            vertical-align: super;\r\n                            padding-left: 0px;\r\n                        }\r\n                        svg {\r\n                            display: block;\r\n                        }\r\n                    }\r\n                }\r\n                .canvas_body {\r\n                    width: 100%;\r\n                    height: 100%;\r\n                    overflow: scroll;\r\n                    position: absolute;\r\n                    //top: 82px;\r\n                    left: 0;\r\n                    .canvas_img {\r\n                        position: absolute;\r\n                        z-index: 10;\r\n                    }\r\n                    #canvasImg {\r\n                        position: absolute;\r\n                        z-index: 20;\r\n                    }\r\n                    #canvasDrawing {\r\n                        position: absolute;\r\n                        z-index: 22;\r\n                    }\r\n                    #canvasMarks {\r\n                        position: absolute;\r\n                        z-index: 21;\r\n                        span {\r\n                            width: 25px;\r\n                            height: 25px;\r\n                            &.mark_non_canvas {\r\n                                display: none;\r\n                            }\r\n                            label {\r\n                                position: absolute;\r\n                                color:#FFFFFF;\r\n                                font-size: 12px;\r\n                                text-align: center;\r\n                                top: 0;\r\n                                left: 0;\r\n                                width: 25px;\r\n                                height: 25px;\r\n                                line-height: 25px;\r\n                            }\r\n                        }\r\n                    } \r\n                }\r\n                .canvas_body::-webkit-scrollbar {\r\n                    width : 6px;\r\n                    height: 1px;\r\n                }\r\n                .canvas_body::-webkit-scrollbar-thumb {\r\n                    border-radius: 10px;\r\n                    box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.05);\r\n                    background: rgb(216, 216, 216);\r\n                }\r\n                .canvas_body::-webkit-scrollbar-track {\r\n                    box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.05);\r\n                    border-radius: 10px;\r\n                    background: rgb(241, 241, 241);\r\n                }\r\n            }\r\n            .form{\r\n                width: 298px;\r\n                height: 224px;\r\n                padding: 0px;\r\n                position: absolute;\r\n                bottom: 0px;\r\n                background: #FFFFFF;\r\n                border-right: 1px solid #E6E6E6;\r\n            }\r\n            .marks{\r\n                width: 298px;\r\n                height: calc(100% - 224px);\r\n                overflow: hidden;\r\n                overflow-y: auto;\r\n                background: #ffffff;\r\n                position: absolute;\r\n                top: 0;\r\n                left: 0;\r\n                border-right: 1px solid #E6E6E6;\r\n                .mark_item{\r\n                    padding: 25px;\r\n                    border-bottom: 1px solid #E6E6E6;\r\n                    position: relative;\r\n                    .mark_item_num{\r\n                        color: #86868B;\r\n                        span{\r\n                            display: inline-block;\r\n                            width: 8px;\r\n                            height: 8px;\r\n                            border-radius: 50%;\r\n                            background: #345CA0;\r\n                            margin-left: 5px;\r\n                            &.mark_canvas{\r\n                                background: #F84D46;\r\n                            }\r\n                        }\r\n                    }\r\n                    .mark_item_user{\r\n                        font-weight: 500;\r\n                        margin-top: 15px;\r\n                    }\r\n                    .mark_item_time{\r\n                        color: #86868B;\r\n                        margin-top: 5px;\r\n                        margin-bottom: 15px;\r\n                    }\r\n                    .mark_item_main{\r\n                        .mark_item_title{\r\n                            color: #000000;\r\n                            white-space: break-spaces;\r\n                        }\r\n                    }\r\n                    .mark_item_menu{\r\n                        position: absolute;\r\n                        top: 25px;\r\n                        right: 15px;\r\n                        i{\r\n                            font-size: 14px;\r\n                            color: #000000;\r\n                            cursor: pointer;\r\n                            border-radius: 50%;\r\n                            padding: 8px;\r\n                            &:hover{\r\n                                background-color: #FFFFFF;\r\n                            }\r\n                            &.has_content{\r\n                                color: #F84D46;\r\n                            }\r\n                        }\r\n                    }\r\n                    &:hover{\r\n                    background-color: #E8F3FE;\r\n                    }\r\n                }\r\n            }\r\n            .marks::-webkit-scrollbar {\r\n                width : 6px;\r\n                height: 1px;\r\n            }\r\n            .marks::-webkit-scrollbar-thumb {\r\n                border-radius: 10px;\r\n                box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.05);\r\n                background: rgb(216, 216, 216);\r\n            }\r\n            .marks::-webkit-scrollbar-track {\r\n                box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.05);\r\n                border-radius: 10px;\r\n                background: rgb(241, 241, 241);\r\n            }\r\n            .nodata{\r\n                text-align: center;\r\n                padding-top: 50px;\r\n                color: #a1a1a1;\r\n            }\r\n            .canvas.nodata{\r\n                display: flex;\r\n                justify-content: center;\r\n                align-items: center;\r\n                padding-top: 0;\r\n                input{\r\n                    width: 100px;\r\n                    height: 34px;\r\n                    opacity: 0;\r\n                    cursor: pointer;\r\n                    position: absolute;\r\n                    z-index: 2;\r\n                    top: calc(50% - 17px);\r\n                    left: calc(50% - 50px);\r\n                }\r\n            }\r\n        }\r\n        .edit-dialog{\r\n            i{\r\n                font-size: 25px;\r\n                color: #000000;\r\n                cursor: pointer;\r\n                border-radius: 50%;\r\n                padding: 8px;\r\n                background-color: #F1F1F1;\r\n            }\r\n            .record_recording{\r\n                color: #F84D46;\r\n            }\r\n            .record_playback{\r\n                display: block;\r\n                width: 100%;\r\n                height: 40px;\r\n            }\r\n            .record_conutdown{\r\n                font-size: 15px;\r\n                margin-left: 10px;\r\n            }\r\n        }\r\n    }\r\n</style>","import mod from \"-!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./project.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./project.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./project.vue?vue&type=template&id=023014bc&scoped=true&\"\nimport script from \"./project.vue?vue&type=script&lang=js&\"\nexport * from \"./project.vue?vue&type=script&lang=js&\"\nimport style0 from \"./project.vue?vue&type=style&index=0&id=023014bc&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"023014bc\",\n  null\n  \n)\n\nexport default component.exports","/**\r\n * 时间插件\r\n */\r\n\r\nconst timer = {\r\n\t// 小于10的数字前面补0\r\n\tto2: number => Number(number) < 10 ? `0${number}` : String(number),\r\n\r\n\t// 获取指定时间\r\n\ttime (format = 'y-m-d', time = null){\r\n\t\tlet date = time ? new Date(time) : new Date();\r\n\t\tformat = format.replace('y', date.getFullYear());\r\n\t\tformat = format.replace('m', this.to2(date.getMonth() + 1));\r\n\t\tformat = format.replace('d', this.to2(date.getDate()));\r\n\t\tformat = format.replace('h', this.to2(date.getHours()));\r\n\t\tformat = format.replace('i', this.to2(date.getMinutes()));\r\n\t\tformat = format.replace('s', this.to2(date.getSeconds()));\r\n\t\tformat = format.replace('w', date.getDay());\r\n\t\treturn format;\r\n\t},\r\n\r\n\t// 获取当前月份有多少天\r\n\tmonthLength (time = null){\r\n\t\tlet y = this.time('y', time) * 1;\r\n\t\tlet m = this.to2(this.time('m', time) * 1 + 1);\r\n\t\tlet unix = new Date(`${y}-${m}-01`).getTime() - 24 * 60 * 60 * 1000;\r\n\t\treturn Number(this.time('d', unix));\r\n\t},\r\n\r\n\t// 获取上个月有多少天\r\n\tpreMonthLenggth (time = null){\r\n\t\tlet y = this.time('y', time) * 1;\r\n\t\tlet m = this.to2(this.time('m', time) * 1);\r\n\t\tlet unix = new Date(`${y}-${m}-01`).getTime() - 24 * 60 * 60 * 1000;\r\n\t\treturn Number(this.time('d', unix));\r\n\t},\r\n\r\n\t// 获取下个月有多少天\r\n\tnextMonthLenggth (time = null){\r\n\t\tlet y = this.time('y', time) * 1;\r\n\t\tlet m = this.to2(this.time('m', time) * 1 + 2);\r\n\t\tlet unix = new Date(`${y}-${m}-01`).getTime() - 24 * 60 * 60 * 1000;\r\n\t\treturn Number(this.time('d', unix));\r\n\t},\r\n\r\n\t// 获取当月第一天\r\n\tmonthFirst (time = null){\r\n\t\tlet unix = this.time('y-m', time) + '-01';\r\n\t\treturn this.time('y-m-d', unix);\r\n\t},\r\n\r\n\t// 获取当月最后一天\r\n\tmonthLast (time = null){\r\n\t\tlet y = this.time('y', time) * 1;\r\n\t\tlet m = this.to2(this.time('m', time) * 1 + 1);\r\n\t\tlet unix = new Date(`${y}-${m}-01`).getTime() - 24 * 60 * 60 * 1000;\r\n\t\treturn this.time('y-m-d', unix);\r\n\t},\r\n\r\n\t// 获取上个月的今天\r\n\tpreMonthToday (time = null){\r\n\t\tlet y = this.time('y', time);\r\n\t\tlet m = this.to2(this.time('m', time) * 1 - 1);\r\n\t\tlet d = this.time('d', time);\r\n\t\treturn this.time('y-m-d', `${y}-${m}-${d}`);\r\n\t},\r\n\r\n\t// 获取下个月的今天\r\n\tnextMonthToday (time = null){\r\n\t\tlet y = this.time('y', time);\r\n\t\tlet m = this.to2(this.time('m', time) * 1 + 1);\r\n\t\tlet d = this.time('d', time);\r\n\t\treturn this.time('y-m-d', `${y}-${m}-${d}`);\r\n    },\r\n    \r\n    // 已经过去了多少时间\r\n    timeout (time){\r\n\r\n    },\r\n\r\n    // 倒计时\r\n    timeRemaining (time, format){\r\n        time = time - parseInt(new Date().getTime()/1000);\r\n        return this.unixToString(format, time);\r\n    },\r\n\r\n    // 时间戳的差值转化为时间字符串\r\n    unixToString (format, time){\r\n        let d = parseInt(time / 60 / 60 / 24);\r\n        let h = parseInt((time - d * 86400) / 3600);\r\n        let i = parseInt((time - d * 86400 - h * 3600) / 60);\r\n        let s = time - d * 86400 - h * 3600 - i * 60;\r\n        format = format.replace('d', timer.to2(timer.low(d)));\r\n        format = format.replace('h', timer.to2(timer.low(h)));\r\n        format = format.replace('i', timer.to2(timer.low(i)));\r\n        format = format.replace('s', timer.to2(timer.low(s)));\r\n        return format;\r\n    },\r\n\r\n    // 小于0的直接输出0\r\n    low (num){\r\n        return num < 0 ? 0 : num;\r\n    },\r\n\r\n\t// 把日期转成对象\r\n\tparse (string){\r\n\t\treturn new Date(string);\r\n\t}\r\n}\r\n\r\nexport default timer;"],"names":["render","_vm","this","_c","_self","staticClass","on","$event","$router","go","_v","_s","lang","back","info","title","share","directives","name","rawName","value","expression","attrs","loading","class","active_tool","currentTool","model","callback","$$v","brushColor","inactive_tool","currentHistory","navCanvas","canvasHistorys","length","saveCanvas","onCanvasMouseDown","onCanvasMouseUp","_l","item","index","key","mark_non_canvas","pos_x","style","left","pos","x","top","y","position","num","marks","id","mark_canvas","user_name","create_time","content","user","openEditDialog","has_content","playback","del","_e","nodata","inp","form","staticStyle","forming","submitForm","inpSub","lang2","edit","editForm","show","$set","minRows","maxRows","addContent","record_recording","isRecording","onRecorderClick","recorderCountDown","slot","closeEditDialog","tips19","updateMark","tips20","staticRenderFns","data","uploading","rec","httping","canvasBody","width","height","canvasImg","currentCanvas","isCanvasMouseDown","canvasContext","tempPosition","tempCanvas","recorderStream","recorderChunks","recorderMedia","isSupportRecording","setRecorderInterval","beforeMount","$lang","$ajax","get","$route","query","then","r","map","timer","time","status","setCanvas","setRecorder","mounted","JSON","parse","localStorage","getItem","setWindowEvent","methods","$copy","group_id","addMarks","push","result","splice","$message","success","console","log","document","querySelector","pause","openAddDialog","addMark","post","Number","projectId","createrId","pos_y","resetMarks","warning","getCanvas","image","Image","onload","drawImage","saveCanvasToHistory","src","path","canvas_body","clientWidth","clientHeight","naturalWidth","naturalHeight","canvas_img","canvasDrawing","canvasMarks","ctx","getContext","lineCap","lineJoin","ctxImg","cssText","img_url","canvas","imgData","toDataURL","canvasPath","$notify","message","type","slice","i","putImageData","zoomCanvas","e","getImageData","shift","button","getCanvasMousePosition","clientX","clientY","resetToolState","addEventListener","event","currentPos","drawCanvas","strokeStyle","moveTo","lineTo","setCanvasTempPosition","ctrlKey","code","setTempCanvas","canvasPosition","getBoundingClientRect","action","beginPath","lineWidth","stroke","navigator","mediaDevices","getUserMedia","audio","video","handleDevicesSuccess","catch","handleDevicesError","clearInterval","stop","stream","MediaRecorder","onRecorderMediaDataAvailable","onRecorderMediaStop","start","setInterval","err","blob","Blob","audioURL","window","URL","createObjectURL","getAudioTracks","forEach","track","reader","FileReader","readAsDataURL","onloadend","component","to2","number","String","format","date","Date","replace","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getDay","monthLength","m","unix","getTime","preMonthLenggth","nextMonthLenggth","monthFirst","monthLast","preMonthToday","d","nextMonthToday","timeout","timeRemaining","parseInt","unixToString","h","s","low","string"],"sourceRoot":""}